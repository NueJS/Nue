!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).nue={})}(this,(function(t){"use strict";const e={t:{},o:!1,i:{defaultStyle:":host{display:block;}"},_:void 0},n={l:"*if",u:"*else",p:"*else-if"},o={m:"*for",v:"*key"},s={h:"*enter",g:"*exit",k:"*move"},r="*ref",c=Symbol(),i=Symbol(),_=Symbol(),a=Symbol(),f=(t,e)=>t.getAttribute(e),l=(t,e)=>t.removeAttribute(e),u=(t,e,n)=>t.setAttribute(e,n),p=(t,e,n=!1,o)=>{t.style.animation=e,n&&d(t,(()=>{t.style.animation="",o&&o()}))},d=(t,e)=>{t.addEventListener("animationend",e,{once:!0})},m=t=>document.createElement(t),y=t=>document.createComment(t),b=document.createElement("div"),v=t=>{const e="data-"+t;u(b,e,"");const n=Object.keys(b.dataset)[0];return l(b,e),n},h=t=>{t[a].forEach((t=>t()));for(const e in t)h(t[e])},g=(t,e)=>{((t,e)=>{let n=t;const o=e.length-1;e.forEach(((t,e)=>{n[a].forEach((t=>t())),n=n[t],e===o&&h(n)}))})(t.C,e),t.S||(t=>{setTimeout((()=>{const e=[...t.A];((t,e)=>{t.V.I.forEach((t=>t(e))),t.D.forEach((t=>((t,e)=>{t.forEach((t=>{const{j:n}=t;(n&&n.R||!n)&&t(e)})),t.clear()})(t,e))),t.V.T.forEach((t=>t(e)))})(t,e),t.A.length=0,t.S=!1}),0),t.S=!0})(t)},x={N:!1,O:!1,P:!1,M:!1},k={U:0,G:1,F:2,H:3,q:4,K:5,L:6,B:7},C=0,S=1,w=0,A=1,I=(t,e)=>[e.slice(0,-1).reduce(((t,e)=>t[e]),t),e[e.length-1]],V=(t,e,n)=>{[t[e],t[n]]=[t[n],t[e]]},$=(t,e,n)=>{t.splice(e,0,n)},D=t=>t.reduce(((t,e,n)=>(t[e]=n,t)),{}),j=t=>void 0!==t,R=t=>{t.forEach((t=>t())),t.length=0},T=t=>"object"==typeof t&&null!==t,N=(t,e,n,o)=>{const s=((t,e)=>{if(0===e.length)return t;let n,o;[n,o]=I(t.$,e),n[_]||([n,o]=I(t.$,e.slice(0,-1))),x.M=!0;const s=n[o];return x.M=!1,s})(t,e);n.j&&s!==t&&t.J.add(n.j);const r=((t,e)=>()=>e.add(t))(n,s.D[o]);let c=s.C;const i=e.length-1;return e.forEach(((t,e)=>{c[t]||(c[t]={[a]:new Set}),c=c[t],e===i&&c[a].add(r)})),()=>c[a].delete(r)},O=(t,e,n,o)=>{const s=e.map((e=>N(t,e,n,o)));return()=>s.forEach((t=>t()))},P={W:[]},M=(t,e,n)=>{const[o,s]=(t=>{x.N=!0;const e=t();x.N=!1;const n=[...P.W];return P.W=[],[e,n]})(e),r=s.map((t=>1===t.length?t:t.slice(0,-1)));return O(t,r,(()=>{const o=e();t.$[n]=o}),w),o},U=(t,e,n=[])=>{const o=t.parent&&t.parent.$;let s=n;if(!T(e))return e;const r=Array.isArray(e)?[]:{};Object.keys(e).forEach((n=>{r[n]=U(t,e[n],[...s,n])}));return new Proxy(r,{has:(t,e)=>e in t||!!o&&e in o,set(e,n,r){if(e[n]===r)return!0;if(n===i)return s=[...s.slice(0,-1),r],!0;const c=n in e;let a=r;if(x.P){if(c)return!0;"function"==typeof a&&(a=M(t,a,n))}else if(!c&&o&&n in o)return Reflect.set(o,n,r);T(a)&&(a[_]?Array.isArray(e)&&(a[i]=n):a=U(t,a,[...s,n]));const f=()=>Reflect.set(e,n,a);if(x.O){const o=e[n],r=a,c=f();if(o!==r){const e=()=>[...s,n],c=e();t.A.push({oldValue:o,newValue:r,statePath:c,getPath:e}),g(t,c)}return c}return f()},deleteProperty:(e,n)=>(x.O&&g(t,[...s,n]),Reflect.deleteProperty(e,n)),get(e,n){if(n===_)return!0;if(n===c)return e;if(x.N){const t=[...s,n];0!==s.length?P.W[P.W.length-1]=t:P.W.push(t)}return n in e?x.M?t:Reflect.get(e,n):o?Reflect.get(o,n):void 0}})},G=t=>{t.X&&(t.Y=t.X.map((t=>t())),t.R=!0)},E=t=>{t.Y&&(t.Y.forEach((t=>t())),t.R=!1)},F=(t,e)=>{t.X||(t.X=[]),t.X.push(e)},H=(t,e,n,o)=>{o.node=e;F(e,(()=>(o(),O(t,n,o,A))))},q=t=>t+"-",K=(t,e)=>e.reduce(((t,e)=>t.replace(new RegExp(`<${e.name}|</${e.name}`,"g"),q)),t),L=(t,e)=>e.reduce(((e,n,o)=>e+t[o]+n),"")+t[t.length-1],z=(t,e)=>{t.Z&&(e.Z=t.Z),t.hasChildNodes()&&t.childNodes.forEach(((t,n)=>{z(t,e.childNodes[n])}))},B=t=>{const e=t.cloneNode(!0);return z(t,e),e},{G:J,H:Q,U:W,q:X,L:Y,F:Z,K:tt,B:et}=k,nt={[J]:(t,e,n)=>{const o=e.tt,s=e.et,r=n.fn[o],c=t=>r(t,n.$);F(t,(()=>(t.addEventListener(s,c),()=>t.removeEventListener(s,c))))},[Q]:(t,e,n)=>{const o=e.et,{nt:s,ot:r,st:c,rt:i}=e.tt;if(t.matches("input, textarea")){const e="number"===t.type||"range"===t.type,s=()=>{let s=t[o];s=e?Number(s):s,((t,e,n)=>{const[o,s]=I(t,e);Reflect.set(o,s,n)})(n.$,i[0],s)};t.addEventListener("input",s)}H(n,t,i,(()=>{t[o]=s(n)}))},[W]:(t,e,n)=>{const o=e.tt;H(n,t,o.rt,(()=>u(t,e.et,o.nt(n))))},[X]:(t,e,n)=>{const o=e.tt,s=e.et;H(n,t,o.rt,(()=>o.nt(n)?u(n,s,""):l(t,s)))},[Y]:(t,e,n)=>{const o=e.et,s=e.tt;t.fn||(t.fn=Object.create(n.fn)),t.fn[o]=n.fn[s]},[Z]:(t,e,n)=>{const{tt:o,et:s}=e,{nt:r,rt:c}=o,i=()=>{t.$[s]=r(n)};t===n?i():(t.ct||(t.ct={}),t.ct[s]=r(n)),O(n,c,i,w)},[tt]:(t,e)=>{t.ct[e.et]=e.tt},[et]:(t,e,n)=>{const o=e.tt;n.refs[o]=t}},ot=(t,e)=>{const n=t.Z,o=[t];n.it&&n.it.forEach((t=>{o.push(B(t))})),t._t=!0;const{at:s}=n,r=t.previousSibling;let c,i;const _=()=>{let t=!1;o.forEach((n=>{const{_t:o,isConnected:s}=n,{ft:_,lt:a}=n.Z,{h:f,g:l}=a,u=!_||_.getValue(e);if(!t&&u){if(t=!0,!s){o||(ft(e,n),n._t=!0);const t=()=>{r.after(n),f&&i&&p(n,f,!0)};c&&c.Z.lt.g&&n!==c?d(c,t):t(),c=n}}else s&&(l?(y=l,(m=n).disconnectedCallback(),m.ut=!0,p(m,y,!0,(()=>m.remove()))):n.remove());var m,y}))};O(e,s,_,w),e.dt.push((()=>{t.remove(),_(),i=!0}))},st=t=>({yt:t.offsetLeft,bt:t.offsetTop}),rt=(t,e)=>{const[n,o]=t,{vt:s,ht:r,gt:c,xt:i}=e,_=((t,e,n)=>{const{kt:o,Ct:s,St:r}=t,c=B(o);return c.parent=s,c.ct=r(e,n),c})(e,o,n);0===n?r.after(_):s[n-1].after(_),s.splice(n,0,_),c.h&&i&&p(_,c.h,!0)},ct=(t,e)=>{const[n,o]=t;((t,e)=>{t.wt=!0,e.wt=!0;const n=t.parentNode,o=e.parentNode,s=m("div"),r=m("div");n.replaceChild(s,t),o.replaceChild(r,e),n.replaceChild(e,s),o.replaceChild(t,r),t.wt=!1,e.wt=!1})(e[n],e[o]),V(e,n,o)},it=(t,e,n)=>{const o=st(t),s=e.yt-o.yt,r=e.bt-o.bt;requestAnimationFrame((()=>{t.style.transform=`translate(${s}px, ${r}px)`,t.style.transition="",requestAnimationFrame((()=>{t.style.transform="",t.style.transition=`transform ${n}`}))}))},_t=(t,e,n,o)=>{const{vt:s,xt:r,gt:c,At:i}=t,{k:_,g:a}=c,{It:f,Vt:l}=i,u=Object.keys(n),d=()=>{u.length&&u.forEach((t=>{const e=Number(t),o=s[e];o&&n[e].forEach((t=>{const[e,n]=I(o.$[f],t.$t);e[n]=t.Dt}))}))};e.length?(()=>{const n=(t=>{const{Ct:e,jt:n,Rt:o}=t,s=o();return{Tt:s,Nt:n(),Ot:D(s)}})(t),c=((t,e,n)=>{const o={Pt:[],Mt:[],Ut:[]};for(const s of n)for(;;){const n=t.Tt[s];if(!j(n))break;if(n in e.Ot)break;o.Pt.push(s),t.Tt.splice(s,1),t.Nt.splice(s,1)}for(const s of n){const n=e.Tt[s];j(n)&&(n in t.Ot||(o.Mt.push([s,e.Nt[s]]),$(t.Tt,s,n),$(t.Nt,s,e.Nt[s])))}for(const s of n){const n=t.Tt[s];if(n!==e.Tt[s]){const r=e.Ot[n];o.Ut.push([s,r]),V(t.Tt,s,r),V(t.Nt,s,r)}}return t.Ot=D(t.Tt),o})(o,n,e);_&&r&&((t,e)=>{for(const n of t){const t=e[n];t.Gt=st(t)}})(e,s);const i=()=>{((t,e)=>{const{Pt:n,Mt:o,Ut:s}=t,{vt:r}=e;n.forEach((t=>{return(n=r)[e=t].remove(),void n.splice(e,1);var e,n})),o.forEach((t=>rt(t,e))),s.forEach((t=>ct(t,r)))})(c,t),r&&(l&&e.forEach((t=>{s[t]&&(s[t].$[l]=t)})),d()),_&&((t,e)=>{const n=t.gt.k,o=t.vt;for(const t of e){const e=o[t];it(e,e.Gt,n)}})(t,e)};if(a&&c.Pt.length){((t,e,n)=>{const o=t.length-1;t.forEach(((t,s)=>{p(t,e,!0,(()=>{s===o&&n()}))}))})(c.Pt.map(((t,e)=>s[t+e])),a,i)}else i();o.Nt=[...n.Nt],o.Tt=n.Tt,o.Ot=n.Ot})():d()},at=(t,e)=>{const n=t.Z,o=n.At,{Et:s,Vt:r,It:c,v:i}=o,_=s.rt[0],a=_.join("."),f=y("loop/"),l={Nt:[],Tt:[],Ot:{}},u=(t,e)=>{const n={[c]:t};return r&&(n[r]=e),n},p=()=>s.nt(t),d=(e,n)=>{const o={$:u(e,n),Ft:t.Ft};return i.nt(o)},m={vt:[],ht:f,kt:t,jt:p,St:u,Rt:()=>p().map(d),Ct:e,xt:!1,At:o,gt:n.lt},b=()=>{const t=p().length;_t(m,(t=>{const e=[];for(let n=0;n<t;n++)e.push(n);return e})(t),{},l)};e.dt.push((()=>{t.before(f),t.before(y("/loop")),t.remove(),b(),m.xt=!0}));N(e,_,(t=>{if(t.some((t=>{return e=t.path,n=_,e.length===n.length&&e.every(((t,e)=>t===n[e]));var e,n})))b();else{const[e,n]=((t,e,n)=>{const o=new Set,s={},r=n.length;return t.forEach((t=>{const{newValue:n,oldValue:c,livePath:i}=t,_=i();if(_.join(".").startsWith(e)){const t=_[r];if(_.length===r+1)if("length"===t)for(let t=n;t<c;t++)o.add(t);else o.add(Number(t));else{const e={$t:_.slice(r+1),Dt:n};t in s?s[t].push(e):s[t]=[e]}}})),[[...o].sort(((t,e)=>t-e)),s]})(t,a,_);_t(m,e,n,l)}}),A)},ft=(t,e)=>{const{Z:n,nodeType:o}=t;if(n){if(e.Ht.add(t),n.qt){if(t.parent=e,n.At)return at(t,e);n.Kt&&ot(t,e)}else if(o===t.TEXT_NODE)return((t,e)=>{const n=t.Z,{nt:o,rt:s}=n.tt;H(e,t,s,(()=>{t.textContent=o(e)}))})(t,e);n.Lt&&((t,e,n)=>{e.forEach((e=>{const o=e.ot,s=nt[o];s&&s(t,e,n)}))})(t,n.Lt,e)}(t=>t.Z&&t.Z.qt)(t)||t.hasChildNodes()&&t.childNodes.forEach((t=>ft(t,e)))},lt=(t,e=!1)=>{const n=(e?t:t.slice(1,-1)).replace(/ /g,"");return n.includes("(")?(t=>{const e=t.slice(0,-1),[n,o]=e.split("("),s=o.split(",").map((t=>t.split(".")));return{ot:S,rt:s,nt:t=>(0,t.fn[n])(...s.map((e=>I(t.$,e))).map((([t,e])=>t[e]))),st:t}})(n):(t=>{const e=t.split(".");return{ot:C,nt:t=>{{const[n,o]=I(t.$,e);return n[o]}},rt:[e],st:t}})(n)},ut=(t,e,n)=>{const o=t.textContent||"";if(!o.trim())return void e.push((()=>t.remove()));const s=((t,e)=>{const n=[];let o=!1,s="",r=-1;const c=t=>{s="",o=t};for(;++r<e.length;){const t=e[r],i=e[r+1];if("!"===t&&"["===i)s+="[",r+=1;else if("["===t)s&&n.push(s),c(!0);else if(o&&"]"===t){const t=lt(s,!0);n.push(t),c(!1)}else s+=t}return s&&n.push(s),n})(0,o),r=[];s.forEach((t=>{let e;"string"==typeof t?e=document.createTextNode(t):(e=document.createTextNode(t.st),e.Z={tt:t}),r.push(e)})),e.push((()=>{r.forEach((e=>t.before(e))),t.remove()}))},{h:pt,g:dt,k:mt}=s,{m:yt,v:bt}=o,vt=[pt,dt,mt,yt,bt],{u:ht,l:gt,p:xt}=n,kt=(t,e,r)=>{t.Z={qt:!0,zt:e,Lt:[]};const c=f(t,o.m);if(c)((t,e)=>{const[n,o,s]=e.replace(/\(|\)|,|(\sin\s)/g," ").split(/\s+/).filter((t=>t)),r=j(s);t.Z.At={Et:lt(r?s:o,!0),It:n,Vt:r?o:void 0,v:lt(f(t,bt))},vt.forEach((e=>l(t,e)))})(t,c);else{const e=Ct(t);if(e){const[o,c]=e;((t,e,o)=>{var r;t.Z={...t.Z,Kt:e,lt:(r=t,{h:f(r,s.h),g:f(r,s.g),k:f(r,s.k)})},e!==n.u&&(t.Z.ft=lt(o)),[s.h,s.g,e].forEach((e=>l(t,e)))})(t,o,c),o===gt&&r.push((()=>(t=>{const e=[];let o=t.nextElementSibling;const s=y("if");for(t.before(s);;){const t=o&&o.Z&&o.Z.Kt;if(!t||t===n.l)break;e.push(o),o=o.nextElementSibling}(e[e.length-1]||t).after(y("/if")),e.forEach((t=>t.remove()));const r=[t.Z.ft.rt];e.forEach((t=>{t.Z.Kt!==n.u&&r.push(t.Z.ft.rt)})),t.Z={...t.Z,it:e,at:r,Bt:s}})(t)))}}},Ct=t=>{const e=[ht,gt,xt];for(const n of e){const e=f(t,n);if(null!==e)return[n,e]}return!1},St=(t,e,n,o)=>{const s=e[t.nodeName];if(t.nodeType===t.TEXT_NODE)return ut(t,n);s&&kt(t,s,n),t.hasAttribute&&((t,e,n)=>{const o=[],s=!!e;for(const e of t.getAttributeNames()){const n=t.getAttribute(e),i="["===(c=n)[0]&&c.endsWith("]");let _,a=e,f=k.U;const u=e[0];if(e===r)f=k.B,_=n;else if(e.startsWith("fn.")){if(!s)continue;f=k.L,a=e.slice(3),_=n}else if(e.startsWith("$.")){if(!s)continue;a=e.slice(2),i?(f=k.F,_=lt(n)):(f=k.K,_=n)}else"@"===u?(f=k.G,a=e.slice(1),_=n):i&&(e.endsWith(":if")?(f=k.q,a=e.slice(0,-3)):":"===u&&(f=k.H,a=e.slice(1)),_=lt(n));if(_){let n=a;a.includes("-")&&(n=v(a)),o.push({et:n,tt:_,ot:f}),l(t,e)}}var c;o.length&&(t.Z||(t.Z={}),t.Z.Lt=o)})(t,s),t.hasChildNodes()&&t.childNodes.forEach((t=>St(t,e,n,o)))},wt=t=>{const{t:n,i:o}=e,s=t.name;if(s in n)return;let r;n[s]=t;class c extends HTMLElement{constructor(){super();const t=this;t.Ft=s,t.refs={},t.C={[a]:new Set},t.D=[new Set,new Set],t.A=[],t.dt=[],t.Ht=new Set,t.J=new Set,t.fn||(t.fn={}),(t=>{t.V={Jt:[],Qt:[],I:[],T:[]},t.hooks={onMount:e=>t.V.Jt.push(e),onDestroy:e=>t.V.Qt.push(e),beforeUpdate:e=>t.V.I.push(e),afterUpdate:e=>t.V.T.push(e),onMutate:(e,n)=>{t.V.Jt.push((()=>{const o=n.map((t=>t.split(".")));return O(t,o,e,0)}))}}})(t)}connectedCallback(){const e=this;if(!e.wt){if(e.ut=!1,e.shadowRoot)e.J.forEach(G);else{e.$=U(e,e.ct||{},[]);const[n,s,c]=((t,e,n)=>{let o=[],s="",r="";x.O=!1,x.P=!0;const{$:c,refs:i,fn:_,hooks:a}=t;return e({$:c,refs:i,fn:_,...a,hooks:a,html:(t,...e)=>{n||(s=L(t,e))},components:t=>{n||(o=t)},css:(t,...e)=>{n||(r=L(t,e))}}),x.O=!0,x.P=!1,[K(s,o),r,o]})(e,t,!!r);if(!r){let t={};c&&(t=c.reduce(((t,e)=>{const{name:n}=e;var o;return t[q((o=n,o.toUpperCase()))]=n,t}),{})),r=m("template"),r.innerHTML=n+`<style default> ${o.defaultStyle} </style><style scoped >`+s+"</style>";const i=[];St(r.content,t,i,e),R(i),c.forEach(wt)}e.childNodes.forEach((t=>ft(t,e))),((t,e)=>{const n=B(e.content);ft(n,t),R(t.dt),t.attachShadow({mode:"open"}).append(n)})(e,r),e.Ht.forEach(G),G(e)}e.V.Jt.forEach((t=>t()))}}disconnectedCallback(){const t=this;t.ut||t.wt||(t.V.Qt.forEach((t=>t())),t.J.forEach(E))}}customElements.define(q(s),c)};t.render=(t,n,o)=>{o&&(e.i={...e.i,...o}),wt(t);const s=document.createElement(q(t.name));n.replaceWith(s)},Object.defineProperty(t,"Wt",{value:!0})}));
