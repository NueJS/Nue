!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).nue={})}(this,(function(t){"use strict";const e={t:{},o:!1,i:{defaultStyle:""},_:void 0},n=t=>document.createElement(t),o=t=>document.createComment(t),s={l:"*if",u:"*else",p:"*else-if"},r={m:"*for",v:"*key"},c={h:"*enter",g:"*exit",C:"*move"},i="*ref",_=Symbol(),a=Symbol(),l=Symbol(),f=Symbol(),u=(t,e)=>t.getAttribute(e),d=(t,e)=>t.removeAttribute(e),p=(t,e,n)=>t.setAttribute(e,n),{h:m,g:y,C:b}=c,v=t=>({h:u(t,m),g:u(t,y),C:u(t,b)}),h=document.createElement("div"),g=t=>{const e="data-"+t;p(h,e,"");const n=Object.keys(h.dataset)[0];return d(h,e),n},C=t=>(t=>t.toLowerCase())(t)+"-",x=(t,e,n)=>{[t[e],t[n]]=[t[n],t[e]]},S=(t,e,n)=>{t.splice(e,0,n)},w=t=>t.reduce(((t,e,n)=>(t[e]=n,t)),{}),k=t=>void 0!==t,A=t=>{t.forEach((t=>t())),t.length=0},P=t=>"object"==typeof t&&null!==t,U={S:0,k:1,A:2,P:3,U:4,I:5,V:6,j:7,R:8},I=0,V=1,$=0,j=1,R=(t,e)=>[e.slice(0,-1).reduce(((t,e)=>t[e]),t),e[e.length-1]],N=(t,e=!1)=>{const n=(e?t:t.slice(1,-1)).replace(/ /g,"");return n.includes("(")&&n.includes(")")?((t,e)=>{const n=t.slice(0,-1),[o,s]=n.split("("),r=s.split(",").map((t=>t.split(".")));return{N:V,O:r,T:t=>(0,t.fn[o])(...r.map((e=>R(t.$,e))).map((([t,e])=>t[e]))),D:t,M:e}})(n,t):((t,e)=>{const n=t.split(".");return{N:I,T:t=>{{const[e,o]=R(t.$,n);return e[o]}},O:[n],D:t,M:e}})(n,t)},{S:O,R:T,U:D,I:M,P:G,j:E,A:H,V:q,k:F}=U,K=(t,e,n)=>{const o=t.textContent||"";if(!o.trim())return void e.push((()=>t.remove()));const s=((t,e)=>{const n=[];let o=!1,s="",r=-1;const c=t=>{s="",o=t};for(;++r<t.length;){const e=t[r],i=t[r+1];if("!"===e&&"["===i)s+="[",r+=1;else if("["===e)s&&n.push(s),c(!0);else if(o&&"]"===e){const t=N(s,!0);n.push(t),c(!1)}else s+=e}return s&&n.push(s),n})(o),r=[];s.forEach((t=>{let e;if("string"==typeof t)e=document.createTextNode(t);else{const n=`[${t.D}]`;e=document.createTextNode(n),e.G={H:t}}r.push(e)})),e.push((()=>{r.forEach((e=>t.before(e))),t.remove()}))},{h:L,g:z}=c,{h:B,g:J,C:Q}=c,{m:W,v:X}=r,Y=[B,J,Q,W,X],{u:Z,l:tt,p:et}=s,nt=(t,e,n,c)=>{t.G={q:!0,F:e,K:[]};const i=u(t,r.m);if(i)((t,e,n)=>{const[o,s,r]=e.replace(/\(|\)|,|(\sin\s)/g," ").split(/\s+/).filter((t=>t)),c=k(r),i=u(t,X);t.G.L={B:N(c?r:s,!0),J:o,W:c?s:void 0,v:N(i)},t.G.X=v(t),Y.forEach((e=>d(t,e)))})(t,i);else{const e=ot(t);if(e){const[n,r]=e;((t,e,n)=>{t.G={...t.G,Y:e,X:v(t)},e!==s.u&&(t.G.Z=N(n)),[L,z,e].forEach((e=>d(t,e)))})(t,n,r),n===tt&&c.push((()=>(t=>{const e=[];let n=t.nextElementSibling;const r=o("if");for(t.before(r);;){const t=n&&n.G&&n.G.Y;if(!t||t===s.l)break;e.push(n),n=n.nextElementSibling}(e[e.length-1]||t).after(o("/if")),e.forEach((t=>t.remove()));let c=[...t.G.Z.O];e.forEach((t=>{if(t.G.Y!==s.u){const e=t.G.Z.O;c=[...c,...e]}})),t.G={...t.G,tt:e,et:c,nt:r}})(t)))}}},ot=t=>{const e=[Z,tt,et];for(const n of e){const e=u(t,n);if(null!==e)return[n,e]}return!1},st=(t,e,n)=>{const o=e.ot[t.nodeName];e.F;if(t.nodeType===t.TEXT_NODE)return K(t,n);o&&nt(t,o,0,n),t.hasAttribute&&((t,e)=>{const n=[],o=!!e;for(const e of t.getAttributeNames()){const r=t.getAttribute(e),c="["===(s=r)[0]&&s.endsWith("]");let _,a=e,l=O;const f=e[0];if(e===i)l=T,_=r;else if(e.startsWith("fn.")){if(!o)continue;l=E,a=e.slice(3),_=r}else if(e.startsWith("$.")){if(!o)continue;a=e.slice(2),c?(l=H,_=N(r)):(l=q,_=r)}else"@"===f?(l=F,a=e.slice(1),_=r):c&&(e.endsWith(":if")?(l=M,a=e.slice(0,-3)):e.startsWith("bind:")?(l=D,a=e.slice(5)):":"===f&&(l=G,a=e.slice(1)),_=N(r));if(_){let o=a;a.includes("-")&&(o=g(a)),n.push({st:o,H:_,N:l}),d(t,e)}}var s;n.length&&(t.G||(t.G={}),t.G.K=n)})(t,o),t.hasChildNodes()&&t.childNodes.forEach((t=>st(t,e,n)))},rt=t=>{const{components:n,html:o,css:s,rt:r}=t,c=n?((t,e)=>e.reduce(((t,e)=>t.replace(new RegExp(`<${e.name}|</${e.name}`,"g"),C)),t))(o,n):o,{defaultStyle:i}=e.i,_=i?ct(i,"default"):"",a=s?ct(s,"scoped"):"";r.innerHTML=c+_+a;const l=[];st(r.content,t,l),A(l)},ct=(t,e)=>`<style ${e}>${t}</style>`,it={ct:!1,it:!1,_t:!1,at:!1},_t=(t,e,n,o)=>{const s=((t,e)=>{if(0===e.length)return t;let n,o;[n,o]=R(t.$,e),n[l]||([n,o]=R(t.$,e.slice(0,-1))),it.at=!0;const s=n[o];return it.at=!1,s})(t,e);n.lt&&s!==t&&t.ft.add(n.lt);const r=((t,e)=>()=>e.add(t))(n,s.ut[o]);let c=s.dt;const i=e.length-1;return e.forEach(((t,e)=>{c[t]||(c[t]={[f]:new Set}),c=c[t],e===i&&c[f].add(r)})),()=>c[f].delete(r)},at=(t,e,n,o)=>{const s=e.map((e=>_t(t,e,n,o)));return()=>s.forEach((t=>t()))},lt=(t,e)=>{t.refs={},t.F=e,t.dt={[f]:new Set},t.ut=[new Set,new Set],t.yt=[],t.bt=[],t.vt=new Set,t.ft=new Set,t.ht||(t.ht={}),t.fn||(t.fn=t.parent?Object.create(t.parent.fn):{}),(t=>{t.gt={Ct:[],xt:[],St:[],wt:[]};const{Ct:e,xt:n,St:o,wt:s}=t.gt;t.events={onMount:t=>e.push(t),onDestroy:t=>n.push(t),beforeUpdate:t=>o.push(t),afterUpdate:t=>s.push(t),onMutate:(n,o)=>{e.push((()=>{const e=o.map((t=>t.split(".")));return at(t,e,n,0)}))}}})(t)},ft=t=>{t.kt&&(t.At=t.kt.map((t=>t())),t.Pt=!0)},ut=t=>{t.At&&(t.At.forEach((t=>t())),t.Pt=!1)},dt=(t,e)=>{t.kt||(t.kt=[]),t.kt.push(e)},pt=(t,e,n,o)=>{o.lt=e;dt(e,(()=>(o(),at(t,n,o,j))))},mt=(t,e,n)=>{const o=e.st,{T:s,O:r}=e.H;if(pt(n,t,r,(()=>{t[o]=s(n)})),e.N===U.U){const e="number"===t.type||"range"===t.type,s=()=>{let s=t[o];s=e?Number(s):s,((t,e,n)=>{const[o,s]=R(t,e);Reflect.set(o,s,n)})(n.$,r[0],s)};t.addEventListener("input",s)}},{k:yt,P:bt,S:vt,I:ht,j:gt,A:Ct,V:xt,R:St,U:wt}=U,kt={[yt]:(t,e,n)=>{const o=e.H,s=e.st,r=n.fn[o],c=t=>r(t,n.$);dt(t,(()=>(t.addEventListener(s,c),()=>t.removeEventListener(s,c))))},[bt]:mt,[wt]:mt,[vt]:(t,e,n)=>{const o=e.H;pt(n,t,o.O,(()=>p(t,e.st,o.T(n))))},[ht]:(t,e,n)=>{const o=e.H,s=e.st;pt(n,t,o.O,(()=>o.T(n)?p(n,s,""):d(t,s)))},[gt]:(t,e,n)=>{t.fn||(t.fn=Object.create(t.parent.fn)),t.fn[e.st]=n.fn[e.H]},[Ct]:(t,e,n)=>{const{H:o,st:s}=e,{T:r,O:c}=o,i=()=>{t.$[s]=r(n)};t===n?i():(t.ht||(t.ht={}),t.ht[s]=r(n)),at(n,c,i,$)},[xt]:(t,e)=>{t.ht[e.st]=e.H},[St]:(t,e,n)=>{const o=e.H;n.refs[o]=t}},At=(t,e,n)=>{e.forEach((e=>{const o=e.N,s=kt[o];s&&s(t,e,n)}))},Pt=(t,e)=>{t.G&&(e.G=t.G),t.hasChildNodes()&&t.childNodes.forEach(((t,n)=>{Pt(t,e.childNodes[n])}))},Ut=t=>{const e=t.cloneNode(!0);return Pt(t,e),e},It=(t,e,n=!1,o)=>{t.style.animation=e,n&&Vt(t,(()=>{t.style.animation="",o&&o()}))},Vt=(t,e)=>{t.addEventListener("animationend",e,{once:!0})},$t=(t,e)=>{const n=t.G,o=[t];n.tt&&n.tt.forEach((t=>{o.push(Ut(t))})),t.Ut=!0;const{et:s}=n,r=t.previousSibling;let c,i;const _=()=>{let t=!1;o.forEach((n=>{const{Ut:o,isConnected:s}=n,{Z:_,X:a}=n.G,{h:l,g:f}=a,u=!_||_.T(e);if(!t&&u){if(t=!0,!s){o||(Mt(n,e),n.Ut=!0);const t=()=>{r.after(n),l&&i&&It(n,l,!0)};c&&c.G.X.g&&n!==c?Vt(c,t):t(),c=n}}else s&&(f?(p=f,(d=n).disconnectedCallback(),d.It=!0,It(d,p,!0,(()=>d.remove()))):n.remove());var d,p}))};at(e,s,_,$),e.bt.push((()=>{t.remove(),_(),i=!0}))},jt=t=>({Vt:t.offsetLeft,$t:t.offsetTop}),Rt=(t,e)=>{const[n,o]=t,{jt:s,Rt:r,Nt:c,Ot:i}=e,_=((t,e,n)=>{const{Tt:o,Dt:s,Mt:r}=t,c=Ut(o);return c.Gt=!0,c.parent=s,c.ht=r(e,n),c})(e,o,n);0===n?r.after(_):s[n-1].after(_),s.splice(n,0,_),c.h&&i&&It(_,c.h,!0)},Nt=(t,e)=>{const[o,s]=t;((t,e)=>{t.Et=!0,e.Et=!0;const o=t.parentNode,s=e.parentNode,r=n("div"),c=n("div");o.replaceChild(r,t),s.replaceChild(c,e),o.replaceChild(e,r),s.replaceChild(t,c),t.Et=!1,e.Et=!1})(e[o],e[s]),x(e,o,s)},Ot=(t,e,n)=>{const o=jt(t),s=e.Vt-o.Vt,r=e.$t-o.$t;requestAnimationFrame((()=>{t.style.transform=`translate(${s}px, ${r}px)`,t.style.transition="",requestAnimationFrame((()=>{t.style.transform="",t.style.transition=`transform ${n}`}))}))},Tt=(t,e,n,o)=>{const{jt:s,Ot:r,Nt:c,L:i}=t,{C:_,g:a}=c,{J:l,W:f}=i,u=Object.keys(n),d=()=>{u.length&&u.forEach((t=>{const e=Number(t),o=s[e];o&&n[e].forEach((t=>{const[e,n]=R(o.$[l],t.Ht);e[n]=t.qt}))}))};e.length?(()=>{const n=(t=>{const{Dt:e,Ft:n,Kt:o}=t,s=o();return{Lt:s,zt:n(),Bt:w(s)}})(t),c=((t,e,n)=>{const o={Jt:[],Qt:[],Wt:[]};for(const s of n)for(;;){const n=t.Lt[s];if(!k(n))break;if(n in e.Bt)break;o.Jt.push(s),t.Lt.splice(s,1),t.zt.splice(s,1)}for(const s of n){const n=e.Lt[s];k(n)&&(n in t.Bt||(o.Qt.push([s,e.zt[s]]),S(t.Lt,s,n),S(t.zt,s,e.zt[s])))}for(const s of n){const n=t.Lt[s];if(n!==e.Lt[s]){const r=e.Bt[n];o.Wt.push([s,r]),x(t.Lt,s,r),x(t.zt,s,r)}}return t.Bt=w(t.Lt),o})(o,n,e);_&&r&&((t,e)=>{for(const n of t){const t=e[n];t.Xt=jt(t)}})(e,s);const i=()=>{((t,e)=>{const{Jt:n,Qt:o,Wt:s}=t,{jt:r}=e;n.forEach((t=>{return(n=r)[e=t].remove(),void n.splice(e,1);var e,n})),o.forEach((t=>Rt(t,e))),s.forEach((t=>Nt(t,r)))})(c,t),r&&(f&&e.forEach((t=>{s[t]&&(s[t].$[f]=t)})),d()),_&&((t,e)=>{const n=t.Nt.C,o=t.jt;for(const t of e){const e=o[t];Ot(e,e.Xt,n)}})(t,e)};if(a&&c.Jt.length){((t,e,n)=>{const o=t.length-1;t.forEach(((t,s)=>{It(t,e,!0,(()=>{s===o&&n()}))}))})(c.Jt.map(((t,e)=>s[t+e])),a,i)}else i();o.zt=[...n.zt],o.Lt=n.Lt,o.Bt=n.Bt})():d()},Dt=(t,e)=>{const n=t.G,s=n.L,{B:r,W:c,J:i,v:_}=s,a=r.O[0],l=a.join("."),f=o("loop/"),u={zt:[],Lt:[],Bt:{}},d=(t,e)=>{const n={[i]:t};return c&&(n[c]=e),n},p=()=>r.T(e),m=(e,n)=>{const o={$:d(e,n),F:t.F};return _.T(o)},y={jt:[],Rt:f,Tt:t,Ft:p,Mt:d,Kt:()=>p().map(m),Dt:e,Ot:!1,L:s,Nt:n.X},b=()=>{const t=p().length;Tt(y,(t=>{const e=[];for(let n=0;n<t;n++)e.push(n);return e})(t),{},u)};e.bt.push((()=>{t.before(f),t.before(o("/loop")),t.remove(),b(),y.Ot=!0}));_t(e,a,(t=>{if(t.some((t=>{return e=t.path,n=a,e.length===n.length&&e.every(((t,e)=>t===n[e]));var e,n})))b();else{const[e,n]=((t,e,n)=>{const o=new Set,s={},r=n.length;return t.forEach((t=>{const{newValue:n,oldValue:c,livePath:i}=t,_=i();if(_.join(".").startsWith(e)){const t=_[r];if(_.length===r+1)if("length"===t)for(let t=n;t<c;t++)o.add(t);else o.add(Number(t));else{const e={Ht:_.slice(r+1),qt:n};t in s?s[t].push(e):s[t]=[e]}}})),[[...o].sort(((t,e)=>t-e)),s]})(t,l,a);Tt(y,e,n,u)}}),j)},Mt=(t,e)=>{const{G:n,nodeType:o}=t;if(n){if(e.vt.add(t),n.q){if(t.parent=e,t.ht={},n.L)return Dt(t,e);n.Y===s.l&&$t(t,e)}else if(o===t.TEXT_NODE)return((t,e)=>{const n=t.G,{T:o,O:s}=n.H;pt(e,t,s,(()=>{t.textContent=o(e)}))})(t,e);n.K&&At(t,n.K,e)}(t=>t.G&&t.G.q)(t)||t.hasChildNodes()&&t.childNodes.forEach((t=>Mt(t,e)))},Gt=t=>{t[f].forEach((t=>t()));for(const e in t)Gt(t[e])},Et=(t,e)=>{((t,e)=>{let n=t;const o=e.length-1;e.forEach(((t,e)=>{n[f].forEach((t=>t())),n=n[t],n&&e===o&&Gt(n)}))})(t.dt,e),t.Yt||(t=>{t.Yt=!0,setTimeout((()=>{const e=[...t.yt];((t,e)=>{const{St:n,wt:o}=t.gt;n.forEach((t=>t(e))),t.ut.forEach((t=>((t,e)=>{t.forEach((t=>{const{lt:n}=t;(n&&n.Pt||!n)&&t(e)})),t.clear()})(t,e))),o.forEach((t=>t(e)))})(t,e),t.yt.length=0,t.Yt=!1}),0)})(t)},Ht={Zt:[]},qt=(t,e,n)=>{const[o,s]=(t=>{it.ct=!0;const e=t();it.ct=!1;const n=[...Ht.Zt];return Ht.Zt=[],[e,n]})(e),r=s.map((t=>1===t.length?t:t.slice(0,-1)));return at(t,r,(()=>{const o=e();t.$[n]=o}),$),o},Ft=(t,e,n=[])=>{const o=t.parent&&t.parent.$;let s=n;if(!P(e))return e;const r=Array.isArray(e)?[]:{};Object.keys(e).forEach((n=>{r[n]=Ft(t,e[n],[...s,n])}));return new Proxy(r,{has:(t,e)=>e in t||!!o&&e in o,set(e,n,r){if(e[n]===r)return!0;if(n===a)return s=[...s.slice(0,-1),r],!0;const c=n in e;let i=r;if(it._t){if(c)return!0;"function"==typeof i&&(i=qt(t,i,n))}else if(!c&&o&&n in o)return Reflect.set(o,n,r);P(i)&&(i[l]?Array.isArray(e)&&(i[a]=n):i=Ft(t,i,[...s,n]));const _=()=>Reflect.set(e,n,i);if(it.it){const o=e[n],r=i,c=_();if(o!==r){const e=()=>[...s,n],c=e();t.yt.push({oldValue:o,newValue:r,path:c,livePath:e}),Et(t,c)}return c}return _()},deleteProperty:(e,n)=>(it.it&&Et(t,[...s,n]),Reflect.deleteProperty(e,n)),get(e,n){if(n===l)return!0;if(n===_)return e;if(it.ct){const t=[...s,n];0!==s.length?Ht.Zt[Ht.Zt.length-1]=t:Ht.Zt.push(t)}return n in e?it.at?t:Reflect.get(e,n):o?Reflect.get(o,n):void 0}})};function Kt(t,e){t.$=Ft(t,t.ht||{},[]),e.js&&((t,e)=>{it.it=!1,it._t=!0,t(e),it.it=!0,it._t=!1})(e.js,t),t.Gt&&At(t,t.G.K,t),t.childNodes.forEach((e=>Mt(e,t))),((t,e)=>{const n=Ut(e.content);Mt(n,t),A(t.bt),t.attachShadow({mode:"open"}).append(n)})(t,e.rt),ft(t)}const Lt=t=>{const{t:o}=e,s=t.name;if(s in o)return;o[s]=t;const r=(t=>{const e=new t,o=t.name;return e.te=t,e.F=o,e.ee=C(o),e.rt=n("template"),e.ot=e.components?e.components.reduce(((t,e)=>{const{name:n}=e;var o;return t[(o=n,(t=>t.toUpperCase())(o)+"-")]=n,t}),{}):{},e})(t);rt(r);class c extends HTMLElement{constructor(){super(),lt(this,s)}connectedCallback(){((t,e)=>{if(t.Et)return;t.It=!1;const{vt:n,ft:o,gt:s,shadowRoot:r}=t;r?o.forEach(ft):(Kt(t,e),n.forEach(ft)),s.Ct.forEach((t=>t()))})(this,r)}disconnectedCallback(){(t=>{const{gt:e,ft:n,It:o,Et:s}=t;o||s||(n.forEach(ut),e.xt.forEach((t=>t())))})(this)}}const{ee:i,components:_}=r;customElements.define(i,c),_&&_.forEach(Lt)};t.render=(t,o)=>{o&&(e.i={...e.i,...o}),Lt(t);const s=t.name,r=document.querySelector(s),c=n(C(s));return r.replaceWith(c),c},Object.defineProperty(t,"ne",{value:!0})}));
