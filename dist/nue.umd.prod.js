!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).nue={})}(this,(function(t){"use strict";const e={t:{},o:!1,i:{defaultStyle:":host{display:block;}"},_:void 0},n={l:"*if",u:"*else",p:"*else-if"},o={m:"*for",h:"*key"},s={v:"*enter",g:"*exit",k:"*move"},r="*ref",c=Symbol(),i=Symbol(),_=Symbol(),a=Symbol(),l=(t,e)=>t.getAttribute(e),f=(t,e)=>t.removeAttribute(e),u=(t,e,n)=>t.setAttribute(e,n),p=(t,e,n=!1,o)=>{t.style.animation=e,n&&d(t,(()=>{t.style.animation="",o&&o()}))},d=(t,e)=>{t.addEventListener("animationend",e,{once:!0})},m=t=>document.createElement(t),y=t=>document.createComment(t),b=t=>({v:l(t,s.v),g:l(t,s.g),k:l(t,s.k)}),h=document.createElement("div"),v=t=>{const e="data-"+t;u(h,e,"");const n=Object.keys(h.dataset)[0];return f(h,e),n},g=t=>{t[a].forEach((t=>t()));for(const e in t)g(t[e])},x=(t,e)=>{((t,e)=>{let n=t;const o=e.length-1;e.forEach(((t,e)=>{n[a].forEach((t=>t())),n=n[t],n&&e===o&&g(n)}))})(t.C,e),t.S||(t=>{setTimeout((()=>{const e=[...t.A];((t,e)=>{t.P.I.forEach((t=>t(e))),t.V.forEach((t=>((t,e)=>{t.forEach((t=>{const{j:n}=t;(n&&n.R||!n)&&t(e)})),t.clear()})(t,e))),t.P.T.forEach((t=>t(e)))})(t,e),t.A.length=0,t.S=!1}),0),t.S=!0})(t)},k={N:!1,O:!1,M:!1,U:!1},C={D:0,G:1,F:2,H:3,q:4,K:5,L:6,B:7},S=0,w=1,A=0,$=1,I=(t,e)=>[e.slice(0,-1).reduce(((t,e)=>t[e]),t),e[e.length-1]],P=(t,e,n)=>{[t[e],t[n]]=[t[n],t[e]]},V=(t,e,n)=>{t.splice(e,0,n)},j=t=>t.reduce(((t,e,n)=>(t[e]=n,t)),{}),R=t=>void 0!==t,T=t=>{t.forEach((t=>t())),t.length=0},N=t=>"object"==typeof t&&null!==t,O=(t,e,n,o)=>{const s=((t,e)=>{if(0===e.length)return t;let n,o;[n,o]=I(t.$,e),n[_]||([n,o]=I(t.$,e.slice(0,-1))),k.U=!0;const s=n[o];return k.U=!1,s})(t,e);n.j&&s!==t&&t.J.add(n.j);const r=((t,e)=>()=>e.add(t))(n,s.V[o]);let c=s.C;const i=e.length-1;return e.forEach(((t,e)=>{c[t]||(c[t]={[a]:new Set}),c=c[t],e===i&&c[a].add(r)})),()=>c[a].delete(r)},M=(t,e,n,o)=>{const s=e.map((e=>O(t,e,n,o)));return()=>s.forEach((t=>t()))},U={W:[]},D=(t,e,n)=>{const[o,s]=(t=>{k.N=!0;const e=t();k.N=!1;const n=[...U.W];return U.W=[],[e,n]})(e),r=s.map((t=>1===t.length?t:t.slice(0,-1)));return M(t,r,(()=>{const o=e();t.$[n]=o}),A),o},G=(t,e,n=[])=>{const o=t.parent&&t.parent.$;let s=n;if(!N(e))return e;const r=Array.isArray(e)?[]:{};Object.keys(e).forEach((n=>{r[n]=G(t,e[n],[...s,n])}));return new Proxy(r,{has:(t,e)=>e in t||!!o&&e in o,set(e,n,r){if(e[n]===r)return!0;if(n===i)return s=[...s.slice(0,-1),r],!0;const c=n in e;let a=r;if(k.M){if(c)return!0;"function"==typeof a&&(a=D(t,a,n))}else if(!c&&o&&n in o)return Reflect.set(o,n,r);N(a)&&(a[_]?Array.isArray(e)&&(a[i]=n):a=G(t,a,[...s,n]));const l=()=>Reflect.set(e,n,a);if(k.O){const o=e[n],r=a,c=l();if(o!==r){const e=()=>[...s,n],c=e();t.A.push({oldValue:o,newValue:r,path:c,livePath:e}),x(t,c)}return c}return l()},deleteProperty:(e,n)=>(k.O&&x(t,[...s,n]),Reflect.deleteProperty(e,n)),get(e,n){if(n===_)return!0;if(n===c)return e;if(k.N){const t=[...s,n];0!==s.length?U.W[U.W.length-1]=t:U.W.push(t)}return n in e?k.U?t:Reflect.get(e,n):o?Reflect.get(o,n):void 0}})},E=t=>{t.X&&(t.Y=t.X.map((t=>t())),t.R=!0)},F=t=>{t.Y&&(t.Y.forEach((t=>t())),t.R=!1)},H=(t,e)=>{t.X||(t.X=[]),t.X.push(e)},q=(t,e,n,o)=>{o.j=e;H(e,(()=>(o(),M(t,n,o,$))))},K=t=>(t=>t.toLowerCase())(t)+"-",L=(t,e)=>e.reduce(((t,e)=>t.replace(new RegExp(`<${e.name}|</${e.name}`,"g"),K)),t),z=(t,e)=>e.reduce(((e,n,o)=>e+t[o]+n),"")+t[t.length-1],B=(t,e)=>{t.Z&&(e.Z=t.Z),t.hasChildNodes()&&t.childNodes.forEach(((t,n)=>{B(t,e.childNodes[n])}))},J=t=>{const e=t.cloneNode(!0);return B(t,e),e},{G:Q,H:W,D:X,q:Y,L:Z,F:tt,K:et,B:nt}=C,ot={[Q]:(t,e,n)=>{const o=e.tt,s=e.et,r=n.fn[o],c=t=>r(t,n.$);H(t,(()=>(t.addEventListener(s,c),()=>t.removeEventListener(s,c))))},[W]:(t,e,n)=>{const o=e.et,{nt:s,ot:r,st:c,rt:i,ct:_}=e.tt;if(t.matches("input, textarea")){const e="number"===t.type||"range"===t.type,s=()=>{let s=t[o];s=e?Number(s):s,((t,e,n)=>{const[o,s]=I(t,e);Reflect.set(o,s,n)})(n.$,i[0],s)};t.addEventListener("input",s)}q(n,t,i,(()=>{t[o]=s(n)}))},[X]:(t,e,n)=>{const o=e.tt;q(n,t,o.rt,(()=>u(t,e.et,o.nt(n))))},[Y]:(t,e,n)=>{const o=e.tt,s=e.et;q(n,t,o.rt,(()=>o.nt(n)?u(n,s,""):f(t,s)))},[Z]:(t,e,n)=>{const o=e.et,s=e.tt;t.fn[o]=n.fn[s]},[tt]:(t,e,n)=>{const{tt:o,et:s}=e,{nt:r,rt:c}=o,i=()=>{t.$[s]=r(n)};t===n?i():(t.it||(t.it={}),t.it[s]=r(n)),M(n,c,i,A)},[et]:(t,e)=>{t.it[e.et]=e.tt},[nt]:(t,e,n)=>{const o=e.tt;n.refs[o]=t}},st=(t,e,n)=>{e.forEach((e=>{const o=e.ot,s=ot[o];s&&s(t,e,n)}))},rt=(t,e)=>{const n=t.Z,o=[t];n._t&&n._t.forEach((t=>{o.push(J(t))})),t.at=!0;const{lt:s}=n,r=t.previousSibling;let c,i;const _=()=>{let t=!1;o.forEach((n=>{const{at:o,isConnected:s}=n,{ft:_,ut:a}=n.Z,{v:l,g:f}=a,u=!_||_.nt(e);if(!t&&u){if(t=!0,!s){o||(ut(n,e),n.at=!0);const t=()=>{r.after(n),l&&i&&p(n,l,!0)};c&&c.Z.ut.g&&n!==c?d(c,t):t(),c=n}}else s&&(f?(y=f,(m=n).disconnectedCallback(),m.dt=!0,p(m,y,!0,(()=>m.remove()))):n.remove());var m,y}))};M(e,s,_,A),e.yt.push((()=>{t.remove(),_(),i=!0}))},ct=t=>({bt:t.offsetLeft,ht:t.offsetTop}),it=(t,e)=>{const[n,o]=t,{vt:s,gt:r,xt:c,kt:i}=e,_=((t,e,n)=>{const{Ct:o,St:s,wt:r}=t,c=J(o);return c.At=!0,c.parent=s,c.it=r(e,n),c})(e,o,n);0===n?r.after(_):s[n-1].after(_),s.splice(n,0,_),c.v&&i&&p(_,c.v,!0)},_t=(t,e)=>{const[n,o]=t;((t,e)=>{t.$t=!0,e.$t=!0;const n=t.parentNode,o=e.parentNode,s=m("div"),r=m("div");n.replaceChild(s,t),o.replaceChild(r,e),n.replaceChild(e,s),o.replaceChild(t,r),t.$t=!1,e.$t=!1})(e[n],e[o]),P(e,n,o)},at=(t,e,n)=>{const o=ct(t),s=e.bt-o.bt,r=e.ht-o.ht;requestAnimationFrame((()=>{t.style.transform=`translate(${s}px, ${r}px)`,t.style.transition="",requestAnimationFrame((()=>{t.style.transform="",t.style.transition=`transform ${n}`}))}))},lt=(t,e,n,o)=>{const{vt:s,kt:r,xt:c,It:i}=t,{k:_,g:a}=c,{Pt:l,Vt:f}=i,u=Object.keys(n),d=()=>{u.length&&u.forEach((t=>{const e=Number(t),o=s[e];o&&n[e].forEach((t=>{const[e,n]=I(o.$[l],t.jt);e[n]=t.Rt}))}))};e.length?(()=>{const n=(t=>{const{St:e,Tt:n,Nt:o}=t,s=o();return{Ot:s,Mt:n(),Ut:j(s)}})(t),c=((t,e,n)=>{const o={Dt:[],Gt:[],Et:[]};for(const s of n)for(;;){const n=t.Ot[s];if(!R(n))break;if(n in e.Ut)break;o.Dt.push(s),t.Ot.splice(s,1),t.Mt.splice(s,1)}for(const s of n){const n=e.Ot[s];R(n)&&(n in t.Ut||(o.Gt.push([s,e.Mt[s]]),V(t.Ot,s,n),V(t.Mt,s,e.Mt[s])))}for(const s of n){const n=t.Ot[s];if(n!==e.Ot[s]){const r=e.Ut[n];o.Et.push([s,r]),P(t.Ot,s,r),P(t.Mt,s,r)}}return t.Ut=j(t.Ot),o})(o,n,e);_&&r&&((t,e)=>{for(const n of t){const t=e[n];t.Ft=ct(t)}})(e,s);const i=()=>{((t,e)=>{const{Dt:n,Gt:o,Et:s}=t,{vt:r}=e;n.forEach((t=>{return(n=r)[e=t].remove(),void n.splice(e,1);var e,n})),o.forEach((t=>it(t,e))),s.forEach((t=>_t(t,r)))})(c,t),r&&(f&&e.forEach((t=>{s[t]&&(s[t].$[f]=t)})),d()),_&&((t,e)=>{const n=t.xt.k,o=t.vt;for(const t of e){const e=o[t];at(e,e.Ft,n)}})(t,e)};if(a&&c.Dt.length){((t,e,n)=>{const o=t.length-1;t.forEach(((t,s)=>{p(t,e,!0,(()=>{s===o&&n()}))}))})(c.Dt.map(((t,e)=>s[t+e])),a,i)}else i();o.Mt=[...n.Mt],o.Ot=n.Ot,o.Ut=n.Ut})():d()},ft=(t,e)=>{const n=t.Z,o=n.It,{Ht:s,Vt:r,Pt:c,h:i}=o,_=s.rt[0],a=_.join("."),l=y("loop/"),f={Mt:[],Ot:[],Ut:{}},u=(t,e)=>{const n={[c]:t};return r&&(n[r]=e),n},p=()=>s.nt(e),d=(e,n)=>{const o={$:u(e,n),qt:t.qt};return i.nt(o)},m={vt:[],gt:l,Ct:t,Tt:p,wt:u,Nt:()=>p().map(d),St:e,kt:!1,It:o,xt:n.ut},b=()=>{const t=p().length;lt(m,(t=>{const e=[];for(let n=0;n<t;n++)e.push(n);return e})(t),{},f)};e.yt.push((()=>{t.before(l),t.before(y("/loop")),t.remove(),b(),m.kt=!0}));O(e,_,(t=>{if(t.some((t=>{return e=t.path,n=_,e.length===n.length&&e.every(((t,e)=>t===n[e]));var e,n})))b();else{const[e,n]=((t,e,n)=>{const o=new Set,s={},r=n.length;return t.forEach((t=>{const{newValue:n,oldValue:c,livePath:i}=t,_=i();if(_.join(".").startsWith(e)){const t=_[r];if(_.length===r+1)if("length"===t)for(let t=n;t<c;t++)o.add(t);else o.add(Number(t));else{const e={jt:_.slice(r+1),Rt:n};t in s?s[t].push(e):s[t]=[e]}}})),[[...o].sort(((t,e)=>t-e)),s]})(t,a,_);lt(m,e,n,f)}}),$)},ut=(t,e)=>{const{Z:o,nodeType:s}=t;if(o){if(e.Kt.add(t),o.Lt){if(t.parent=e,t.it={},o.It)return ft(t,e);o.zt===n.l&&rt(t,e)}else if(s===t.TEXT_NODE)return((t,e)=>{const n=t.Z,{nt:o,rt:s}=n.tt;q(e,t,s,(()=>{t.textContent=o(e)}))})(t,e);o.Bt&&st(t,o.Bt,e)}(t=>t.Z&&t.Z.Lt)(t)||t.hasChildNodes()&&t.childNodes.forEach((t=>ut(t,e)))},pt=(t,e=!1)=>{const n=(e?t:t.slice(1,-1)).replace(/ /g,"");return n.includes("(")?((t,e)=>{const n=t.slice(0,-1),[o,s]=n.split("("),r=s.split(",").map((t=>t.split(".")));return{ot:w,rt:r,nt:t=>(0,t.fn[o])(...r.map((e=>I(t.$,e))).map((([t,e])=>t[e]))),st:t,ct:e}})(n,t):((t,e)=>{const n=t.split(".");return{ot:S,nt:t=>{{const[e,o]=I(t.$,n);return e[o]}},rt:[n],st:t,ct:e}})(n,t)},dt=(t,e,n)=>{const o=t.textContent||"";if(!o.trim())return void e.push((()=>t.remove()));const s=((t,e)=>{const n=[];let o=!1,s="",r=-1;const c=t=>{s="",o=t};for(;++r<e.length;){const t=e[r],i=e[r+1];if("!"===t&&"["===i)s+="[",r+=1;else if("["===t)s&&n.push(s),c(!0);else if(o&&"]"===t){const t=pt(s,!0);n.push(t),c(!1)}else s+=t}return s&&n.push(s),n})(0,o),r=[];s.forEach((t=>{let e;if("string"==typeof t)e=document.createTextNode(t);else{const n=`[${t.st}]`;e=document.createTextNode(n),e.Z={tt:t}}r.push(e)})),e.push((()=>{r.forEach((e=>t.before(e))),t.remove()}))},{v:mt,g:yt,k:bt}=s,{m:ht,h:vt}=o,gt=[mt,yt,bt,ht,vt],{u:xt,l:kt,p:Ct}=n,St=(t,e,r,c)=>{t.Z={Lt:!0,Jt:e,Bt:[]};const i=l(t,o.m);if(i)((t,e,n)=>{const[o,s,r]=e.replace(/\(|\)|,|(\sin\s)/g," ").split(/\s+/).filter((t=>t)),c=R(r),i=l(t,vt);t.Z.It={Ht:pt(c?r:s,!0),Pt:o,Vt:c?s:void 0,h:pt(i)},t.Z.ut=b(t),gt.forEach((e=>f(t,e)))})(t,i);else{const e=wt(t);if(e){const[o,r]=e;((t,e,o)=>{t.Z={...t.Z,zt:e,ut:b(t)},e!==n.u&&(t.Z.ft=pt(o)),[s.v,s.g,e].forEach((e=>f(t,e)))})(t,o,r),o===kt&&c.push((()=>(t=>{const e=[];let o=t.nextElementSibling;const s=y("if");for(t.before(s);;){const t=o&&o.Z&&o.Z.zt;if(!t||t===n.l)break;e.push(o),o=o.nextElementSibling}(e[e.length-1]||t).after(y("/if")),e.forEach((t=>t.remove()));let r=[...t.Z.ft.rt];e.forEach((t=>{if(t.Z.zt!==n.u){const e=t.Z.ft.rt;r=[...r,...e]}})),t.Z={...t.Z,_t:e,lt:r,Qt:s}})(t)))}}},wt=t=>{const e=[xt,kt,Ct];for(const n of e){const e=l(t,n);if(null!==e)return[n,e]}return!1},At=(t,e,n,o)=>{const s=e[t.nodeName];if(t.nodeType===t.TEXT_NODE)return dt(t,n);s&&St(t,s,0,n),t.hasAttribute&&((t,e,n)=>{const o=[],s=!!e;for(const e of t.getAttributeNames()){const n=t.getAttribute(e),i="["===(c=n)[0]&&c.endsWith("]");let _,a=e,l=C.D;const u=e[0];if(e===r)l=C.B,_=n;else if(e.startsWith("fn.")){if(!s)continue;l=C.L,a=e.slice(3),_=n}else if(e.startsWith("$.")){if(!s)continue;a=e.slice(2),i?(l=C.F,_=pt(n)):(l=C.K,_=n)}else"@"===u?(l=C.G,a=e.slice(1),_=n):i&&(e.endsWith(":if")?(l=C.q,a=e.slice(0,-3)):":"===u&&(l=C.H,a=e.slice(1)),_=pt(n));if(_){let n=a;a.includes("-")&&(n=v(a)),o.push({et:n,tt:_,ot:l}),f(t,e)}}var c;o.length&&(t.Z||(t.Z={}),t.Z.Bt=o)})(t,s),t.hasChildNodes()&&t.childNodes.forEach((t=>At(t,e,n,o)))},$t=t=>{const{t:n,i:o}=e,s=t.name;if(s in n)return;let r;n[s]=t;class c extends HTMLElement{constructor(){super();const t=this;t.qt=s,t.refs={},t.C={[a]:new Set},t.V=[new Set,new Set],t.A=[],t.yt=[],t.Kt=new Set,t.J=new Set,t.fn=t.parent?Object.create(t.parent.fn):{},t.it||(t.it={}),(t=>{t.P={Wt:[],Xt:[],I:[],T:[]},t.hooks={onMount:e=>t.P.Wt.push(e),onDestroy:e=>t.P.Xt.push(e),beforeUpdate:e=>t.P.I.push(e),afterUpdate:e=>t.P.T.push(e),onMutate:(e,n)=>{t.P.Wt.push((()=>{const o=n.map((t=>t.split(".")));return M(t,o,e,0)}))}}})(t)}connectedCallback(){const e=this;if(!e.$t){if(e.dt=!1,e.shadowRoot)e.J.forEach(E);else{e.$=G(e,e.it||{},[]),e.At&&st(e,e.Z.Bt,e);const[n,s,c]=((t,e,n)=>{let o=[],s="",r="";k.O=!1,k.M=!0;const{$:c,refs:i,fn:_,hooks:a}=t;return e({$:c,refs:i,fn:_,...a,hooks:a,html:(t,...e)=>{n||(s=z(t,e))},components:t=>{n||(o=t)},css:(t,...e)=>{n||(r=z(t,e))}}),k.O=!0,k.M=!1,[L(s,o),r,o]})(e,t,!!r);if(!r){let t={};c&&(t=c.reduce(((t,e)=>{const{name:n}=e;var o;return t[(o=K(n),o.toUpperCase())]=n,t}),{})),r=m("template"),r.innerHTML=n+`<style default> ${o.defaultStyle} </style><style scoped >`+s+"</style>";const i=[];At(r.content,t,i,e),T(i),c.forEach($t)}e.childNodes.forEach((t=>ut(t,e))),((t,e)=>{const n=J(e.content);ut(n,t),T(t.yt),t.attachShadow({mode:"open"}).append(n)})(e,r),e.Kt.forEach(E),E(e)}e.P.Wt.forEach((t=>t()))}}disconnectedCallback(){const t=this;t.dt||t.$t||(t.P.Xt.forEach((t=>t())),t.J.forEach(F))}}customElements.define(K(s),c)};t.render=(t,n,o)=>{o&&(e.i={...e.i,...o}),$t(t);const s=document.createElement(K(t.name));return n.replaceWith(s),s},Object.defineProperty(t,"Yt",{value:!0})}));
