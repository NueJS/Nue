"use strict";Object.defineProperty(exports,"t",{value:!0});const t={o:{},i:!1,_:{defaultStyle:":host{display:block;}"},l:void 0},e={u:"*if",p:"*else",m:"*else-if"},n={v:"*for",h:"*key"},o={g:"*enter",k:"*exit",C:"*move"},s="*ref",r=Symbol(),c=Symbol(),i=Symbol(),_=Symbol(),a=(t,e)=>t.getAttribute(e),l=(t,e)=>t.removeAttribute(e),f=(t,e,n)=>t.setAttribute(e,n),u=(t,e,n=!1,o)=>{t.style.animation=e,n&&p(t,(()=>{t.style.animation="",o&&o()}))},p=(t,e)=>{t.addEventListener("animationend",e,{once:!0})},d=t=>document.createElement(t),m=t=>document.createComment(t),y=document.createElement("div"),v=t=>{const e="data-"+t;f(y,e,"");const n=Object.keys(y.dataset)[0];return l(y,e),n},b=t=>{t[_].forEach((t=>t()));for(const e in t)b(t[e])},h=(t,e)=>{((t,e)=>{let n=t;const o=e.length-1;e.forEach(((t,e)=>{n[_].forEach((t=>t())),n=n[t],e===o&&b(n)}))})(t.S,e),t.A||(t=>{setTimeout((()=>{const e=[...t.I];((t,e)=>{t.V.P.forEach((t=>t(e))),t.R.forEach((t=>((t,e)=>{t.forEach((t=>{const{j:n}=t;(n&&n.N||!n)&&t(e)})),t.clear()})(t,e))),t.V.O.forEach((t=>t(e)))})(t,e),t.I.length=0,t.A=!1}),0),t.A=!0})(t)},g={M:!1,T:!1,U:!1,D:!1},k={G:0,F:1,H:2,q:3,K:4,L:5,B:6,J:7},x=0,C=1,S=0,w=1,A=(t,e)=>[e.slice(0,-1).reduce(((t,e)=>t[e]),t),e[e.length-1]],I=(t,e,n)=>{[t[e],t[n]]=[t[n],t[e]]},P=(t,e,n)=>{t.splice(e,0,n)},V=t=>t.reduce(((t,e,n)=>(t[e]=n,t)),{}),$=t=>void 0!==t,R=t=>{t.forEach((t=>t())),t.length=0},j=t=>"object"==typeof t&&null!==t,N=(t,e,n,o)=>{const s=((t,e)=>{if(0===e.length)return t;let n,o;[n,o]=A(t.$,e),n[i]||([n,o]=A(t.$,e.slice(0,-1))),g.D=!0;const s=n[o];return g.D=!1,s})(t,e);n.j&&s!==t&&t.W.add(n.j);const r=((t,e)=>()=>e.add(t))(n,s.R[o]);let c=s.S;const a=e.length-1;return e.forEach(((t,e)=>{c[t]||(c[t]={[_]:new Set}),c=c[t],e===a&&c[_].add(r)})),()=>c[_].delete(r)},O=(t,e,n,o)=>{const s=e.map((e=>N(t,e,n,o)));return()=>s.forEach((t=>t()))},M={X:[]},T=(t,e,n)=>{const[o,s]=(t=>{g.M=!0;const e=t();g.M=!1;const n=[...M.X];return M.X=[],[e,n]})(e),r=s.map((t=>1===t.length?t:t.slice(0,-1)));return O(t,r,(()=>{const o=e();t.$[n]=o}),S),o},U=(t,e,n=[])=>{const o=t.parent&&t.parent.$;let s=n;if(!j(e))return e;const _=Array.isArray(e)?[]:{};Object.keys(e).forEach((n=>{_[n]=U(t,e[n],[...s,n])}));return new Proxy(_,{has:(t,e)=>e in t||!!o&&e in o,set(e,n,r){if(e[n]===r)return!0;if(n===c)return s=[...s.slice(0,-1),r],!0;const _=n in e;let a=r;if(g.U){if(_)return!0;"function"==typeof a&&(a=T(t,a,n))}else if(!_&&o&&n in o)return Reflect.set(o,n,r);j(a)&&(a[i]?Array.isArray(e)&&(a[c]=n):a=U(t,a,[...s,n]));const l=()=>Reflect.set(e,n,a);if(g.T){const o=e[n],r=a,c=l();if(o!==r){const e=()=>[...s,n],c=e();t.I.push({oldValue:o,newValue:r,path:c,livePath:e}),h(t,c)}return c}return l()},deleteProperty:(e,n)=>(g.T&&h(t,[...s,n]),Reflect.deleteProperty(e,n)),get(e,n){if(n===i)return!0;if(n===r)return e;if(g.M){const t=[...s,n];0!==s.length?M.X[M.X.length-1]=t:M.X.push(t)}return n in e?g.D?t:Reflect.get(e,n):o?Reflect.get(o,n):void 0}})},D=t=>{t.Y&&(t.Z=t.Y.map((t=>t())),t.N=!0)},G=t=>{t.Z&&(t.Z.forEach((t=>t())),t.N=!1)},E=(t,e)=>{t.Y||(t.Y=[]),t.Y.push(e)},F=(t,e,n,o)=>{o.j=e;E(e,(()=>(o(),O(t,n,o,w))))},H=t=>t+"-",q=(t,e)=>e.reduce(((t,e)=>t.replace(new RegExp(`<${e.name}|</${e.name}`,"g"),H)),t),K=(t,e)=>e.reduce(((e,n,o)=>e+t[o]+n),"")+t[t.length-1],L=(t,e)=>{t.tt&&(e.tt=t.tt),t.hasChildNodes()&&t.childNodes.forEach(((t,n)=>{L(t,e.childNodes[n])}))},z=t=>{const e=t.cloneNode(!0);return L(t,e),e},{F:B,q:J,G:Q,K:W,B:X,H:Y,L:Z,J:tt}=k,et={[B]:(t,e,n)=>{const o=e.et,s=e.nt,r=n.fn[o],c=t=>r(t,n.$);E(t,(()=>(t.addEventListener(s,c),()=>t.removeEventListener(s,c))))},[J]:(t,e,n)=>{const o=e.nt,{ot:s,st:r,rt:c,ct:i}=e.et;if(t.matches("input, textarea")){const e="number"===t.type||"range"===t.type,s=()=>{let s=t[o];s=e?Number(s):s,((t,e,n)=>{const[o,s]=A(t,e);Reflect.set(o,s,n)})(n.$,i[0],s)};t.addEventListener("input",s)}F(n,t,i,(()=>{t[o]=s(n)}))},[Q]:(t,e,n)=>{const o=e.et;F(n,t,o.ct,(()=>f(t,e.nt,o.ot(n))))},[W]:(t,e,n)=>{const o=e.et,s=e.nt;F(n,t,o.ct,(()=>o.ot(n)?f(n,s,""):l(t,s)))},[X]:(t,e,n)=>{const o=e.nt,s=e.et;t.fn||(t.fn=Object.create(n.fn)),t.fn[o]=n.fn[s]},[Y]:(t,e,n)=>{const{et:o,nt:s}=e,{ot:r,ct:c}=o,i=()=>{t.$[s]=r(n)};t===n?i():(t.it||(t.it={}),t.it[s]=r(n)),O(n,c,i,S)},[Z]:(t,e)=>{t.it[e.nt]=e.et},[tt]:(t,e,n)=>{const o=e.et;n.refs[o]=t}},nt=(t,e)=>{const n=t.tt,o=[t];n._t&&n._t.forEach((t=>{o.push(z(t))})),t.at=!0;const{lt:s}=n,r=t.previousSibling;let c,i;const _=()=>{let t=!1;o.forEach((n=>{const{at:o,isConnected:s}=n,{ft:_,ut:a}=n.tt,{g:l,k:f}=a,d=!_||_.ot(e);if(!t&&d){if(t=!0,!s){o||(at(n,e),n.at=!0);const t=()=>{r.after(n),l&&i&&u(n,l,!0)};c&&c.tt.ut.k&&n!==c?p(c,t):t(),c=n}}else s&&(f?(y=f,(m=n).disconnectedCallback(),m.dt=!0,u(m,y,!0,(()=>m.remove()))):n.remove());var m,y}))};O(e,s,_,S),e.yt.push((()=>{t.remove(),_(),i=!0}))},ot=t=>({vt:t.offsetLeft,bt:t.offsetTop}),st=(t,e)=>{const[n,o]=t,{ht:s,gt:r,kt:c,xt:i}=e,_=((t,e,n)=>{const{Ct:o,St:s,wt:r}=t,c=z(o);return c.parent=s,c.it=r(e,n),c})(e,o,n);0===n?r.after(_):s[n-1].after(_),s.splice(n,0,_),c.g&&i&&u(_,c.g,!0)},rt=(t,e)=>{const[n,o]=t;((t,e)=>{t.At=!0,e.At=!0;const n=t.parentNode,o=e.parentNode,s=d("div"),r=d("div");n.replaceChild(s,t),o.replaceChild(r,e),n.replaceChild(e,s),o.replaceChild(t,r),t.At=!1,e.At=!1})(e[n],e[o]),I(e,n,o)},ct=(t,e,n)=>{const o=ot(t),s=e.vt-o.vt,r=e.bt-o.bt;requestAnimationFrame((()=>{t.style.transform=`translate(${s}px, ${r}px)`,t.style.transition="",requestAnimationFrame((()=>{t.style.transform="",t.style.transition=`transform ${n}`}))}))},it=(t,e,n,o)=>{const{ht:s,xt:r,kt:c,It:i}=t,{C:_,k:a}=c,{Pt:l,Vt:f}=i,p=Object.keys(n),d=()=>{p.length&&p.forEach((t=>{const e=Number(t),o=s[e];o&&n[e].forEach((t=>{const[e,n]=A(o.$[l],t.$t);e[n]=t.Rt}))}))};e.length?(()=>{const n=(t=>{const{St:e,jt:n,Nt:o}=t,s=o();return{Ot:s,Mt:n(),Tt:V(s)}})(t),c=((t,e,n)=>{const o={Ut:[],Dt:[],Gt:[]};for(const s of n)for(;;){const n=t.Ot[s];if(!$(n))break;if(n in e.Tt)break;o.Ut.push(s),t.Ot.splice(s,1),t.Mt.splice(s,1)}for(const s of n){const n=e.Ot[s];$(n)&&(n in t.Tt||(o.Dt.push([s,e.Mt[s]]),P(t.Ot,s,n),P(t.Mt,s,e.Mt[s])))}for(const s of n){const n=t.Ot[s];if(n!==e.Ot[s]){const r=e.Tt[n];o.Gt.push([s,r]),I(t.Ot,s,r),I(t.Mt,s,r)}}return t.Tt=V(t.Ot),o})(o,n,e);_&&r&&((t,e)=>{for(const n of t){const t=e[n];t.Et=ot(t)}})(e,s);const i=()=>{((t,e)=>{const{Ut:n,Dt:o,Gt:s}=t,{ht:r}=e;n.forEach((t=>{return(n=r)[e=t].remove(),void n.splice(e,1);var e,n})),o.forEach((t=>st(t,e))),s.forEach((t=>rt(t,r)))})(c,t),r&&(f&&e.forEach((t=>{s[t]&&(s[t].$[f]=t)})),d()),_&&((t,e)=>{const n=t.kt.C,o=t.ht;for(const t of e){const e=o[t];ct(e,e.Et,n)}})(t,e)};if(a&&c.Ut.length){((t,e,n)=>{const o=t.length-1;t.forEach(((t,s)=>{u(t,e,!0,(()=>{s===o&&n()}))}))})(c.Ut.map(((t,e)=>s[t+e])),a,i)}else i();o.Mt=[...n.Mt],o.Ot=n.Ot,o.Tt=n.Tt})():d()},_t=(t,e)=>{const n=t.tt,o=n.It,{Ft:s,Vt:r,Pt:c,h:i}=o,_=s.ct[0],a=_.join("."),l=m("loop/"),f={Mt:[],Ot:[],Tt:{}},u=(t,e)=>{const n={[c]:t};return r&&(n[r]=e),n},p=()=>s.ot(t),d=(e,n)=>{const o={$:u(e,n),Ht:t.Ht};return i.ot(o)},y={ht:[],gt:l,Ct:t,jt:p,wt:u,Nt:()=>p().map(d),St:e,xt:!1,It:o,kt:n.ut},v=()=>{const t=p().length;it(y,(t=>{const e=[];for(let n=0;n<t;n++)e.push(n);return e})(t),{},f)};e.yt.push((()=>{t.before(l),t.before(m("/loop")),t.remove(),v(),y.xt=!0}));N(e,_,(t=>{if(t.some((t=>{return e=t.path,n=_,e.length===n.length&&e.every(((t,e)=>t===n[e]));var e,n})))v();else{const[e,n]=((t,e,n)=>{const o=new Set,s={},r=n.length;return t.forEach((t=>{const{newValue:n,oldValue:c,livePath:i}=t,_=i();if(_.join(".").startsWith(e)){const t=_[r];if(_.length===r+1)if("length"===t)for(let t=n;t<c;t++)o.add(t);else o.add(Number(t));else{const e={$t:_.slice(r+1),Rt:n};t in s?s[t].push(e):s[t]=[e]}}})),[[...o].sort(((t,e)=>t-e)),s]})(t,a,_);it(y,e,n,f)}}),w)},at=(t,n)=>{const{tt:o,nodeType:s}=t;if(o){if(n.qt.add(t),o.Kt){if(t.parent=n,o.It)return _t(t,n);o.Lt===e.u&&nt(t,n)}else if(s===t.TEXT_NODE)return((t,e)=>{const n=t.tt,{ot:o,ct:s}=n.et;F(e,t,s,(()=>{t.textContent=o(e)}))})(t,n);o.zt&&((t,e,n)=>{e.forEach((e=>{const o=e.st,s=et[o];s&&s(t,e,n)}))})(t,o.zt,n)}(t=>t.tt&&t.tt.Kt)(t)||t.hasChildNodes()&&t.childNodes.forEach((t=>at(t,n)))},lt=(t,e=!1)=>{const n=(e?t:t.slice(1,-1)).replace(/ /g,"");return n.includes("(")?(t=>{const e=t.slice(0,-1),[n,o]=e.split("("),s=o.split(",").map((t=>t.split(".")));return{st:C,ct:s,ot:t=>(0,t.fn[n])(...s.map((e=>A(t.$,e))).map((([t,e])=>t[e]))),rt:t}})(n):(t=>{const e=t.split(".");return{st:x,ot:t=>{{const[n,o]=A(t.$,e);return n[o]}},ct:[e],rt:t}})(n)},ft=(t,e,n)=>{const o=t.textContent||"";if(!o.trim())return void e.push((()=>t.remove()));const s=((t,e)=>{const n=[];let o=!1,s="",r=-1;const c=t=>{s="",o=t};for(;++r<e.length;){const t=e[r],i=e[r+1];if("!"===t&&"["===i)s+="[",r+=1;else if("["===t)s&&n.push(s),c(!0);else if(o&&"]"===t){const t=lt(s,!0);n.push(t),c(!1)}else s+=t}return s&&n.push(s),n})(0,o),r=[];s.forEach((t=>{let e;"string"==typeof t?e=document.createTextNode(t):(e=document.createTextNode(t.rt),e.tt={et:t}),r.push(e)})),e.push((()=>{r.forEach((e=>t.before(e))),t.remove()}))},{g:ut,k:pt,C:dt}=o,{v:mt,h:yt}=n,vt=[ut,pt,dt,mt,yt],{p:bt,u:ht,m:gt}=e,kt=(t,s,r)=>{t.tt={Kt:!0,Bt:s,zt:[]};const c=a(t,n.v);if(c)((t,e)=>{const[n,o,s]=e.replace(/\(|\)|,|(\sin\s)/g," ").split(/\s+/).filter((t=>t)),r=$(s);t.tt.It={Ft:lt(r?s:o,!0),Pt:n,Vt:r?o:void 0,h:lt(a(t,yt))},vt.forEach((e=>l(t,e)))})(t,c);else{const n=xt(t);if(n){const[s,c]=n;((t,n,s)=>{var r;t.tt={...t.tt,Lt:n,ut:(r=t,{g:a(r,o.g),k:a(r,o.k),C:a(r,o.C)})},n!==e.p&&(t.tt.ft=lt(s)),[o.g,o.k,n].forEach((e=>l(t,e)))})(t,s,c),s===ht&&r.push((()=>(t=>{const n=[];let o=t.nextElementSibling;const s=m("if");for(t.before(s);;){const t=o&&o.tt&&o.tt.Lt;if(!t||t===e.u)break;n.push(o),o=o.nextElementSibling}(n[n.length-1]||t).after(m("/if")),n.forEach((t=>t.remove()));let r=[...t.tt.ft.ct];n.forEach((t=>{if(t.tt.Lt!==e.p){const e=t.tt.ft.ct;r=[...r,...e]}})),t.tt={...t.tt,_t:n,lt:r,Jt:s}})(t)))}}},xt=t=>{const e=[bt,ht,gt];for(const n of e){const e=a(t,n);if(null!==e)return[n,e]}return!1},Ct=(t,e,n,o)=>{const r=e[t.nodeName];if(t.nodeType===t.TEXT_NODE)return ft(t,n);r&&kt(t,r,n),t.hasAttribute&&((t,e,n)=>{const o=[],r=!!e;for(const e of t.getAttributeNames()){const n=t.getAttribute(e),i="["===(c=n)[0]&&c.endsWith("]");let _,a=e,f=k.G;const u=e[0];if(e===s)f=k.J,_=n;else if(e.startsWith("fn.")){if(!r)continue;f=k.B,a=e.slice(3),_=n}else if(e.startsWith("$.")){if(!r)continue;a=e.slice(2),i?(f=k.H,_=lt(n)):(f=k.L,_=n)}else"@"===u?(f=k.F,a=e.slice(1),_=n):i&&(e.endsWith(":if")?(f=k.K,a=e.slice(0,-3)):":"===u&&(f=k.q,a=e.slice(1)),_=lt(n));if(_){let n=a;a.includes("-")&&(n=v(a)),o.push({nt:n,et:_,st:f}),l(t,e)}}var c;o.length&&(t.tt||(t.tt={}),t.tt.zt=o)})(t,r),t.hasChildNodes()&&t.childNodes.forEach((t=>Ct(t,e,n,o)))},St=e=>{const{o:n,_:o}=t,s=e.name;if(s in n)return;let r;n[s]=e;class c extends HTMLElement{constructor(){super();const t=this;t.Ht=s,t.refs={},t.S={[_]:new Set},t.R=[new Set,new Set],t.I=[],t.yt=[],t.qt=new Set,t.W=new Set,t.fn||(t.fn={}),(t=>{t.V={Qt:[],Wt:[],P:[],O:[]},t.hooks={onMount:e=>t.V.Qt.push(e),onDestroy:e=>t.V.Wt.push(e),beforeUpdate:e=>t.V.P.push(e),afterUpdate:e=>t.V.O.push(e),onMutate:(e,n)=>{t.V.Qt.push((()=>{const o=n.map((t=>t.split(".")));return O(t,o,e,0)}))}}})(t)}connectedCallback(){const t=this;if(!t.At){if(t.dt=!1,t.shadowRoot)t.W.forEach(D);else{t.$=U(t,t.it||{},[]);const[n,s,c]=((t,e,n)=>{let o=[],s="",r="";g.T=!1,g.U=!0;const{$:c,refs:i,fn:_,hooks:a}=t;return e({$:c,refs:i,fn:_,...a,hooks:a,html:(t,...e)=>{n||(s=K(t,e))},components:t=>{n||(o=t)},css:(t,...e)=>{n||(r=K(t,e))}}),g.T=!0,g.U=!1,[q(s,o),r,o]})(t,e,!!r);if(!r){let e={};c&&(e=c.reduce(((t,e)=>{const{name:n}=e;var o;return t[H((o=n,o.toUpperCase()))]=n,t}),{})),r=d("template"),r.innerHTML=n+`<style default> ${o.defaultStyle} </style><style scoped >`+s+"</style>";const i=[];Ct(r.content,e,i,t),R(i),c.forEach(St)}t.childNodes.forEach((e=>at(e,t))),((t,e)=>{const n=z(e.content);at(n,t),R(t.yt),t.attachShadow({mode:"open"}).append(n)})(t,r),t.qt.forEach(D),D(t)}t.V.Qt.forEach((t=>t()))}}disconnectedCallback(){const t=this;t.dt||t.At||(t.V.Wt.forEach((t=>t())),t.W.forEach(G))}}customElements.define(H(s),c)};exports.render=(e,n,o)=>{o&&(t._={...t._,...o}),St(e);const s=document.createElement(H(e.name));n.replaceWith(s)};
