"use strict";Object.defineProperty(exports,"t",{value:!0});const t={o:{},i:!1,_:{defaultStyle:":host{display:block;}"},l:void 0},e={u:"*if",p:"*else",m:"*else-if"},n={v:"*for",h:"*key"},o={g:"*enter",k:"*exit",C:"*move"},s="*ref",r=Symbol(),c=Symbol(),i=Symbol(),_=Symbol(),a=(t,e)=>t.getAttribute(e),l=(t,e)=>t.removeAttribute(e),f=(t,e,n)=>t.setAttribute(e,n),u=(t,e,n=!1,o)=>{t.style.animation=e,n&&p(t,(()=>{t.style.animation="",o&&o()}))},p=(t,e)=>{t.addEventListener("animationend",e,{once:!0})},d=t=>document.createElement(t),m=t=>document.createComment(t),y=t=>({g:a(t,o.g),k:a(t,o.k),C:a(t,o.C)}),v=document.createElement("div"),b=t=>{const e="data-"+t;f(v,e,"");const n=Object.keys(v.dataset)[0];return l(v,e),n},h=t=>{t[_].forEach((t=>t()));for(const e in t)h(t[e])},g=(t,e)=>{((t,e)=>{let n=t;const o=e.length-1;e.forEach(((t,e)=>{n[_].forEach((t=>t())),n=n[t],n&&e===o&&h(n)}))})(t.S,e),t.A||(t=>{setTimeout((()=>{const e=[...t.I];((t,e)=>{t.V.P.forEach((t=>t(e))),t.R.forEach((t=>((t,e)=>{t.forEach((t=>{const{j:n}=t;(n&&n.N||!n)&&t(e)})),t.clear()})(t,e))),t.V.O.forEach((t=>t(e)))})(t,e),t.I.length=0,t.A=!1}),0),t.A=!0})(t)},x={M:!1,T:!1,U:!1,D:!1},k={G:0,F:1,H:2,q:3,K:4,L:5,B:6,J:7},C=0,S=1,w=0,A=1,$=(t,e)=>[e.slice(0,-1).reduce(((t,e)=>t[e]),t),e[e.length-1]],I=(t,e,n)=>{[t[e],t[n]]=[t[n],t[e]]},P=(t,e,n)=>{t.splice(e,0,n)},V=t=>t.reduce(((t,e,n)=>(t[e]=n,t)),{}),R=t=>void 0!==t,j=t=>{t.forEach((t=>t())),t.length=0},N=t=>"object"==typeof t&&null!==t,O=(t,e,n,o)=>{const s=((t,e)=>{if(0===e.length)return t;let n,o;[n,o]=$(t.$,e),n[i]||([n,o]=$(t.$,e.slice(0,-1))),x.D=!0;const s=n[o];return x.D=!1,s})(t,e);n.j&&s!==t&&t.W.add(n.j);const r=((t,e)=>()=>e.add(t))(n,s.R[o]);let c=s.S;const a=e.length-1;return e.forEach(((t,e)=>{c[t]||(c[t]={[_]:new Set}),c=c[t],e===a&&c[_].add(r)})),()=>c[_].delete(r)},M=(t,e,n,o)=>{const s=e.map((e=>O(t,e,n,o)));return()=>s.forEach((t=>t()))},T={X:[]},U=(t,e,n)=>{const[o,s]=(t=>{x.M=!0;const e=t();x.M=!1;const n=[...T.X];return T.X=[],[e,n]})(e),r=s.map((t=>1===t.length?t:t.slice(0,-1)));return M(t,r,(()=>{const o=e();t.$[n]=o}),w),o},D=(t,e,n=[])=>{const o=t.parent&&t.parent.$;let s=n;if(!N(e))return e;const _=Array.isArray(e)?[]:{};Object.keys(e).forEach((n=>{_[n]=D(t,e[n],[...s,n])}));return new Proxy(_,{has:(t,e)=>e in t||!!o&&e in o,set(e,n,r){if(e[n]===r)return!0;if(n===c)return s=[...s.slice(0,-1),r],!0;const _=n in e;let a=r;if(x.U){if(_)return!0;"function"==typeof a&&(a=U(t,a,n))}else if(!_&&o&&n in o)return Reflect.set(o,n,r);N(a)&&(a[i]?Array.isArray(e)&&(a[c]=n):a=D(t,a,[...s,n]));const l=()=>Reflect.set(e,n,a);if(x.T){const o=e[n],r=a,c=l();if(o!==r){const e=()=>[...s,n],c=e();t.I.push({oldValue:o,newValue:r,path:c,livePath:e}),g(t,c)}return c}return l()},deleteProperty:(e,n)=>(x.T&&g(t,[...s,n]),Reflect.deleteProperty(e,n)),get(e,n){if(n===i)return!0;if(n===r)return e;if(x.M){const t=[...s,n];0!==s.length?T.X[T.X.length-1]=t:T.X.push(t)}return n in e?x.D?t:Reflect.get(e,n):o?Reflect.get(o,n):void 0}})},G=t=>{t.Y&&(t.Z=t.Y.map((t=>t())),t.N=!0)},E=t=>{t.Z&&(t.Z.forEach((t=>t())),t.N=!1)},F=(t,e)=>{t.Y||(t.Y=[]),t.Y.push(e)},H=(t,e,n,o)=>{o.j=e;F(e,(()=>(o(),M(t,n,o,A))))},q=t=>(t=>t.toLowerCase())(t)+"-",K=(t,e)=>e.reduce(((t,e)=>t.replace(new RegExp(`<${e.name}|</${e.name}`,"g"),q)),t),L=(t,e)=>e.reduce(((e,n,o)=>e+t[o]+n),"")+t[t.length-1],z=(t,e)=>{t.tt&&(e.tt=t.tt),t.hasChildNodes()&&t.childNodes.forEach(((t,n)=>{z(t,e.childNodes[n])}))},B=t=>{const e=t.cloneNode(!0);return z(t,e),e},{F:J,q:Q,G:W,K:X,B:Y,H:Z,L:tt,J:et}=k,nt={[J]:(t,e,n)=>{const o=e.et,s=e.nt,r=n.fn[o],c=t=>r(t,n.$);F(t,(()=>(t.addEventListener(s,c),()=>t.removeEventListener(s,c))))},[Q]:(t,e,n)=>{const o=e.nt,{ot:s,st:r,rt:c,ct:i,it:_}=e.et;if(t.matches("input, textarea")){const e="number"===t.type||"range"===t.type,s=()=>{let s=t[o];s=e?Number(s):s,((t,e,n)=>{const[o,s]=$(t,e);Reflect.set(o,s,n)})(n.$,i[0],s)};t.addEventListener("input",s)}H(n,t,i,(()=>{t[o]=s(n)}))},[W]:(t,e,n)=>{const o=e.et;H(n,t,o.ct,(()=>f(t,e.nt,o.ot(n))))},[X]:(t,e,n)=>{const o=e.et,s=e.nt;H(n,t,o.ct,(()=>o.ot(n)?f(n,s,""):l(t,s)))},[Y]:(t,e,n)=>{const o=e.nt,s=e.et;t.fn[o]=n.fn[s]},[Z]:(t,e,n)=>{const{et:o,nt:s}=e,{ot:r,ct:c}=o,i=()=>{t.$[s]=r(n)};t===n?i():(t._t||(t._t={}),t._t[s]=r(n)),M(n,c,i,w)},[tt]:(t,e)=>{t._t[e.nt]=e.et},[et]:(t,e,n)=>{const o=e.et;n.refs[o]=t}},ot=(t,e,n)=>{e.forEach((e=>{const o=e.st,s=nt[o];s&&s(t,e,n)}))},st=(t,e)=>{const n=t.tt,o=[t];n.at&&n.at.forEach((t=>{o.push(B(t))})),t.lt=!0;const{ft:s}=n,r=t.previousSibling;let c,i;const _=()=>{let t=!1;o.forEach((n=>{const{lt:o,isConnected:s}=n,{ut:_,dt:a}=n.tt,{g:l,k:f}=a,d=!_||_.ot(e);if(!t&&d){if(t=!0,!s){o||(ft(n,e),n.lt=!0);const t=()=>{r.after(n),l&&i&&u(n,l,!0)};c&&c.tt.dt.k&&n!==c?p(c,t):t(),c=n}}else s&&(f?(y=f,(m=n).disconnectedCallback(),m.yt=!0,u(m,y,!0,(()=>m.remove()))):n.remove());var m,y}))};M(e,s,_,w),e.vt.push((()=>{t.remove(),_(),i=!0}))},rt=t=>({bt:t.offsetLeft,ht:t.offsetTop}),ct=(t,e)=>{const[n,o]=t,{gt:s,xt:r,kt:c,Ct:i}=e,_=((t,e,n)=>{const{St:o,wt:s,At:r}=t,c=B(o);return c.$t=!0,c.parent=s,c._t=r(e,n),c})(e,o,n);0===n?r.after(_):s[n-1].after(_),s.splice(n,0,_),c.g&&i&&u(_,c.g,!0)},it=(t,e)=>{const[n,o]=t;((t,e)=>{t.It=!0,e.It=!0;const n=t.parentNode,o=e.parentNode,s=d("div"),r=d("div");n.replaceChild(s,t),o.replaceChild(r,e),n.replaceChild(e,s),o.replaceChild(t,r),t.It=!1,e.It=!1})(e[n],e[o]),I(e,n,o)},_t=(t,e,n)=>{const o=rt(t),s=e.bt-o.bt,r=e.ht-o.ht;requestAnimationFrame((()=>{t.style.transform=`translate(${s}px, ${r}px)`,t.style.transition="",requestAnimationFrame((()=>{t.style.transform="",t.style.transition=`transform ${n}`}))}))},at=(t,e,n,o)=>{const{gt:s,Ct:r,kt:c,Pt:i}=t,{C:_,k:a}=c,{Vt:l,Rt:f}=i,p=Object.keys(n),d=()=>{p.length&&p.forEach((t=>{const e=Number(t),o=s[e];o&&n[e].forEach((t=>{const[e,n]=$(o.$[l],t.jt);e[n]=t.Nt}))}))};e.length?(()=>{const n=(t=>{const{wt:e,Ot:n,Mt:o}=t,s=o();return{Tt:s,Ut:n(),Dt:V(s)}})(t),c=((t,e,n)=>{const o={Gt:[],Et:[],Ft:[]};for(const s of n)for(;;){const n=t.Tt[s];if(!R(n))break;if(n in e.Dt)break;o.Gt.push(s),t.Tt.splice(s,1),t.Ut.splice(s,1)}for(const s of n){const n=e.Tt[s];R(n)&&(n in t.Dt||(o.Et.push([s,e.Ut[s]]),P(t.Tt,s,n),P(t.Ut,s,e.Ut[s])))}for(const s of n){const n=t.Tt[s];if(n!==e.Tt[s]){const r=e.Dt[n];o.Ft.push([s,r]),I(t.Tt,s,r),I(t.Ut,s,r)}}return t.Dt=V(t.Tt),o})(o,n,e);_&&r&&((t,e)=>{for(const n of t){const t=e[n];t.Ht=rt(t)}})(e,s);const i=()=>{((t,e)=>{const{Gt:n,Et:o,Ft:s}=t,{gt:r}=e;n.forEach((t=>{return(n=r)[e=t].remove(),void n.splice(e,1);var e,n})),o.forEach((t=>ct(t,e))),s.forEach((t=>it(t,r)))})(c,t),r&&(f&&e.forEach((t=>{s[t]&&(s[t].$[f]=t)})),d()),_&&((t,e)=>{const n=t.kt.C,o=t.gt;for(const t of e){const e=o[t];_t(e,e.Ht,n)}})(t,e)};if(a&&c.Gt.length){((t,e,n)=>{const o=t.length-1;t.forEach(((t,s)=>{u(t,e,!0,(()=>{s===o&&n()}))}))})(c.Gt.map(((t,e)=>s[t+e])),a,i)}else i();o.Ut=[...n.Ut],o.Tt=n.Tt,o.Dt=n.Dt})():d()},lt=(t,e)=>{const n=t.tt,o=n.Pt,{qt:s,Rt:r,Vt:c,h:i}=o,_=s.ct[0],a=_.join("."),l=m("loop/"),f={Ut:[],Tt:[],Dt:{}},u=(t,e)=>{const n={[c]:t};return r&&(n[r]=e),n},p=()=>s.ot(e),d=(e,n)=>{const o={$:u(e,n),Kt:t.Kt};return i.ot(o)},y={gt:[],xt:l,St:t,Ot:p,At:u,Mt:()=>p().map(d),wt:e,Ct:!1,Pt:o,kt:n.dt},v=()=>{const t=p().length;at(y,(t=>{const e=[];for(let n=0;n<t;n++)e.push(n);return e})(t),{},f)};e.vt.push((()=>{t.before(l),t.before(m("/loop")),t.remove(),v(),y.Ct=!0}));O(e,_,(t=>{if(t.some((t=>{return e=t.path,n=_,e.length===n.length&&e.every(((t,e)=>t===n[e]));var e,n})))v();else{const[e,n]=((t,e,n)=>{const o=new Set,s={},r=n.length;return t.forEach((t=>{const{newValue:n,oldValue:c,livePath:i}=t,_=i();if(_.join(".").startsWith(e)){const t=_[r];if(_.length===r+1)if("length"===t)for(let t=n;t<c;t++)o.add(t);else o.add(Number(t));else{const e={jt:_.slice(r+1),Nt:n};t in s?s[t].push(e):s[t]=[e]}}})),[[...o].sort(((t,e)=>t-e)),s]})(t,a,_);at(y,e,n,f)}}),A)},ft=(t,n)=>{const{tt:o,nodeType:s}=t;if(o){if(n.Lt.add(t),o.zt){if(t.parent=n,t._t={},o.Pt)return lt(t,n);o.Bt===e.u&&st(t,n)}else if(s===t.TEXT_NODE)return((t,e)=>{const n=t.tt,{ot:o,ct:s}=n.et;H(e,t,s,(()=>{t.textContent=o(e)}))})(t,n);o.Jt&&ot(t,o.Jt,n)}(t=>t.tt&&t.tt.zt)(t)||t.hasChildNodes()&&t.childNodes.forEach((t=>ft(t,n)))},ut=(t,e=!1)=>{const n=(e?t:t.slice(1,-1)).replace(/ /g,"");return n.includes("(")?((t,e)=>{const n=t.slice(0,-1),[o,s]=n.split("("),r=s.split(",").map((t=>t.split(".")));return{st:S,ct:r,ot:t=>(0,t.fn[o])(...r.map((e=>$(t.$,e))).map((([t,e])=>t[e]))),rt:t,it:e}})(n,t):((t,e)=>{const n=t.split(".");return{st:C,ot:t=>{{const[e,o]=$(t.$,n);return e[o]}},ct:[n],rt:t,it:e}})(n,t)},pt=(t,e,n)=>{const o=t.textContent||"";if(!o.trim())return void e.push((()=>t.remove()));const s=((t,e)=>{const n=[];let o=!1,s="",r=-1;const c=t=>{s="",o=t};for(;++r<e.length;){const t=e[r],i=e[r+1];if("!"===t&&"["===i)s+="[",r+=1;else if("["===t)s&&n.push(s),c(!0);else if(o&&"]"===t){const t=ut(s,!0);n.push(t),c(!1)}else s+=t}return s&&n.push(s),n})(0,o),r=[];s.forEach((t=>{let e;if("string"==typeof t)e=document.createTextNode(t);else{const n=`[${t.rt}]`;e=document.createTextNode(n),e.tt={et:t}}r.push(e)})),e.push((()=>{r.forEach((e=>t.before(e))),t.remove()}))},{g:dt,k:mt,C:yt}=o,{v:vt,h:bt}=n,ht=[dt,mt,yt,vt,bt],{p:gt,u:xt,m:kt}=e,Ct=(t,s,r,c)=>{t.tt={zt:!0,Qt:s,Jt:[]};const i=a(t,n.v);if(i)((t,e,n)=>{const[o,s,r]=e.replace(/\(|\)|,|(\sin\s)/g," ").split(/\s+/).filter((t=>t)),c=R(r),i=a(t,bt);t.tt.Pt={qt:ut(c?r:s,!0),Vt:o,Rt:c?s:void 0,h:ut(i)},t.tt.dt=y(t),ht.forEach((e=>l(t,e)))})(t,i);else{const n=St(t);if(n){const[s,r]=n;((t,n,s)=>{t.tt={...t.tt,Bt:n,dt:y(t)},n!==e.p&&(t.tt.ut=ut(s)),[o.g,o.k,n].forEach((e=>l(t,e)))})(t,s,r),s===xt&&c.push((()=>(t=>{const n=[];let o=t.nextElementSibling;const s=m("if");for(t.before(s);;){const t=o&&o.tt&&o.tt.Bt;if(!t||t===e.u)break;n.push(o),o=o.nextElementSibling}(n[n.length-1]||t).after(m("/if")),n.forEach((t=>t.remove()));let r=[...t.tt.ut.ct];n.forEach((t=>{if(t.tt.Bt!==e.p){const e=t.tt.ut.ct;r=[...r,...e]}})),t.tt={...t.tt,at:n,ft:r,Wt:s}})(t)))}}},St=t=>{const e=[gt,xt,kt];for(const n of e){const e=a(t,n);if(null!==e)return[n,e]}return!1},wt=(t,e,n,o)=>{const r=e[t.nodeName];if(t.nodeType===t.TEXT_NODE)return pt(t,n);r&&Ct(t,r,0,n),t.hasAttribute&&((t,e,n)=>{const o=[],r=!!e;for(const e of t.getAttributeNames()){const n=t.getAttribute(e),i="["===(c=n)[0]&&c.endsWith("]");let _,a=e,f=k.G;const u=e[0];if(e===s)f=k.J,_=n;else if(e.startsWith("fn.")){if(!r)continue;f=k.B,a=e.slice(3),_=n}else if(e.startsWith("$.")){if(!r)continue;a=e.slice(2),i?(f=k.H,_=ut(n)):(f=k.L,_=n)}else"@"===u?(f=k.F,a=e.slice(1),_=n):i&&(e.endsWith(":if")?(f=k.K,a=e.slice(0,-3)):":"===u&&(f=k.q,a=e.slice(1)),_=ut(n));if(_){let n=a;a.includes("-")&&(n=b(a)),o.push({nt:n,et:_,st:f}),l(t,e)}}var c;o.length&&(t.tt||(t.tt={}),t.tt.Jt=o)})(t,r),t.hasChildNodes()&&t.childNodes.forEach((t=>wt(t,e,n,o)))},At=e=>{const{o:n,_:o}=t,s=e.name;if(s in n)return;let r;n[s]=e;class c extends HTMLElement{constructor(){super();const t=this;t.Kt=s,t.refs={},t.S={[_]:new Set},t.R=[new Set,new Set],t.I=[],t.vt=[],t.Lt=new Set,t.W=new Set,t.fn=t.parent?Object.create(t.parent.fn):{},t._t||(t._t={}),(t=>{t.V={Xt:[],Yt:[],P:[],O:[]},t.hooks={onMount:e=>t.V.Xt.push(e),onDestroy:e=>t.V.Yt.push(e),beforeUpdate:e=>t.V.P.push(e),afterUpdate:e=>t.V.O.push(e),onMutate:(e,n)=>{t.V.Xt.push((()=>{const o=n.map((t=>t.split(".")));return M(t,o,e,0)}))}}})(t)}connectedCallback(){const t=this;if(!t.It){if(t.yt=!1,t.shadowRoot)t.W.forEach(G);else{t.$=D(t,t._t||{},[]),t.$t&&ot(t,t.tt.Jt,t);const[n,s,c]=((t,e,n)=>{let o=[],s="",r="";x.T=!1,x.U=!0;const{$:c,refs:i,fn:_,hooks:a}=t;return e({$:c,refs:i,fn:_,...a,hooks:a,html:(t,...e)=>{n||(s=L(t,e))},components:t=>{n||(o=t)},css:(t,...e)=>{n||(r=L(t,e))}}),x.T=!0,x.U=!1,[K(s,o),r,o]})(t,e,!!r);if(!r){let e={};c&&(e=c.reduce(((t,e)=>{const{name:n}=e;var o;return t[(o=q(n),o.toUpperCase())]=n,t}),{})),r=d("template"),r.innerHTML=n+`<style default> ${o.defaultStyle} </style><style scoped >`+s+"</style>";const i=[];wt(r.content,e,i,t),j(i),c.forEach(At)}t.childNodes.forEach((e=>ft(e,t))),((t,e)=>{const n=B(e.content);ft(n,t),j(t.vt),t.attachShadow({mode:"open"}).append(n)})(t,r),t.Lt.forEach(G),G(t)}t.V.Xt.forEach((t=>t()))}}disconnectedCallback(){const t=this;t.yt||t.It||(t.V.Yt.forEach((t=>t())),t.W.forEach(E))}}customElements.define(q(s),c)};exports.render=(e,n,o)=>{o&&(t._={...t._,...o}),At(e);const s=document.createElement(q(e.name));n.replaceWith(s)};
