"use strict";Object.defineProperty(exports,"t",{value:!0});const t={o:{},_:!1,i:{defaultStyle:""},l:void 0},e=t=>document.createElement(t),n=t=>document.createComment(t),o={u:"*if",p:"*else",m:"*else-if"},s={v:"*for",h:"*key"},r={g:"*enter",C:"*exit",S:"*move"},c="*ref",_=Symbol(),i=Symbol(),a=Symbol(),l=Symbol(),f=(t,e)=>t.getAttribute(e),u=(t,e)=>t.removeAttribute(e),d=(t,e,n)=>t.setAttribute(e,n),{g:p,C:m,S:y}=r,b=t=>({g:f(t,p),C:f(t,m),S:f(t,y)}),v=document.createElement("div"),h=t=>{const e="data-"+t;d(v,e,"");const n=Object.keys(v.dataset)[0];return u(v,e),n},g=t=>(t=>t.toLowerCase())(t)+"-",C=(t,e,n)=>{[t[e],t[n]]=[t[n],t[e]]},S=(t,e,n)=>{t.splice(e,0,n)},x=t=>t.reduce(((t,e,n)=>(t[e]=n,t)),{}),w=t=>void 0!==t,k=t=>{t.forEach((t=>t())),t.length=0},A=t=>"object"==typeof t&&null!==t,P={k:0,A:1,P:2,U:3,I:4,V:5,R:6,j:7,N:8},U=0,I=1,V=0,$=1,R=(t,e)=>[e.slice(0,-1).reduce(((t,e)=>t[e]),t),e[e.length-1]],j=(t,e=!1)=>{const n=(e?t:t.slice(1,-1)).replace(/ /g,"");return n.includes("(")&&n.includes(")")?((t,e)=>{const n=t.slice(0,-1),[o,s]=n.split("("),r=s.split(",").map((t=>t.split(".")));return{O:I,D:r,M:t=>(0,t.fn[o])(...r.map((e=>R(t.$,e))).map((([t,e])=>t[e]))),T:t,G:e}})(n,t):((t,e)=>{const n=t.split(".");return{O:U,M:t=>{{const[e,o]=R(t.$,n);return e[o]}},D:[n],T:t,G:e}})(n,t)},{k:N,N:O,I:D,V:M,U:T,j:G,P:E,R:H,A:q}=P,F=(t,e,n)=>{const o=t.textContent||"";if(!o.trim())return void e.push((()=>t.remove()));const s=((t,e)=>{const n=[];let o=!1,s="",r=-1;const c=t=>{s="",o=t};for(;++r<t.length;){const e=t[r],_=t[r+1];if("!"===e&&"["===_)s+="[",r+=1;else if("["===e)s&&n.push(s),c(!0);else if(o&&"]"===e){const t=j(s,!0);n.push(t),c(!1)}else s+=e}return s&&n.push(s),n})(o),r=[];s.forEach((t=>{let e;if("string"==typeof t)e=document.createTextNode(t);else{const n=`[${t.T}]`;e=document.createTextNode(n),e.H={q:t}}r.push(e)})),e.push((()=>{r.forEach((e=>t.before(e))),t.remove()}))},{g:K,C:L}=r,{g:z,C:B,S:J}=r,{v:Q,h:W}=s,X=[z,B,J,Q,W],{p:Y,u:Z,m:tt}=o,et=(t,e,r,c)=>{t.H={F:!0,K:e,L:[]};const _=f(t,s.v);if(_)((t,e,n)=>{const[o,s,r]=e.replace(/\(|\)|,|(\sin\s)/g," ").split(/\s+/).filter((t=>t)),c=w(r),_=f(t,W);t.H.B={J:j(c?r:s,!0),W:o,X:c?s:void 0,h:j(_)},t.H.Y=b(t),X.forEach((e=>u(t,e)))})(t,_);else{const e=nt(t);if(e){const[s,r]=e;((t,e,n)=>{t.H={...t.H,Z:e,Y:b(t)},e!==o.p&&(t.H.tt=j(n)),[K,L,e].forEach((e=>u(t,e)))})(t,s,r),s===Z&&c.push((()=>(t=>{const e=[];let s=t.nextElementSibling;const r=n("if");for(t.before(r);;){const t=s&&s.H&&s.H.Z;if(!t||t===o.u)break;e.push(s),s=s.nextElementSibling}(e[e.length-1]||t).after(n("/if")),e.forEach((t=>t.remove()));let c=[...t.H.tt.D];e.forEach((t=>{if(t.H.Z!==o.p){const e=t.H.tt.D;c=[...c,...e]}})),t.H={...t.H,et:e,nt:c,ot:r}})(t)))}}},nt=t=>{const e=[Y,Z,tt];for(const n of e){const e=f(t,n);if(null!==e)return[n,e]}return!1},ot=(t,e,n)=>{const o=e.st[t.nodeName];e.K;if(t.nodeType===t.TEXT_NODE)return F(t,n);o&&et(t,o,0,n),t.hasAttribute&&((t,e)=>{const n=[],o=!!e;for(const e of t.getAttributeNames()){const r=t.getAttribute(e),_="["===(s=r)[0]&&s.endsWith("]");let i,a=e,l=N;const f=e[0];if(e===c)l=O,i=r;else if(e.startsWith("fn.")){if(!o)continue;l=G,a=e.slice(3),i=r}else if(e.startsWith("$.")){if(!o)continue;a=e.slice(2),_?(l=E,i=j(r)):(l=H,i=r)}else"@"===f?(l=q,a=e.slice(1),i=r):_&&(e.endsWith(":if")?(l=M,a=e.slice(0,-3)):e.startsWith("bind:")?(l=D,a=e.slice(5)):":"===f&&(l=T,a=e.slice(1)),i=j(r));if(i){let o=a;a.includes("-")&&(o=h(a)),n.push({rt:o,q:i,O:l}),u(t,e)}}var s;n.length&&(t.H||(t.H={}),t.H.L=n)})(t,o),t.hasChildNodes()&&t.childNodes.forEach((t=>ot(t,e,n)))},st=e=>{const{components:n,html:o,css:s,ct:r}=e,c=n?((t,e)=>e.reduce(((t,e)=>t.replace(new RegExp(`<${e.name}|</${e.name}`,"g"),g)),t))(o,n):o,{defaultStyle:_}=t.i,i=_?rt(_,"default"):"",a=s?rt(s,"scoped"):"";r.innerHTML=c+i+a;const l=[];ot(r.content,e,l),k(l)},rt=(t,e)=>`<style ${e}>${t}</style>`,ct={_t:!1,it:!1,at:!1,lt:!1},_t=(t,e,n,o)=>{const s=((t,e)=>{if(0===e.length)return t;let n,o;[n,o]=R(t.$,e),n[a]||([n,o]=R(t.$,e.slice(0,-1))),ct.lt=!0;const s=n[o];return ct.lt=!1,s})(t,e);n.ft&&s!==t&&t.ut.add(n.ft);const r=((t,e)=>()=>e.add(t))(n,s.dt[o]);let c=s.yt;const _=e.length-1;return e.forEach(((t,e)=>{c[t]||(c[t]={[l]:new Set}),c=c[t],e===_&&c[l].add(r)})),()=>c[l].delete(r)},it=(t,e,n,o)=>{const s=e.map((e=>_t(t,e,n,o)));return()=>s.forEach((t=>t()))},at=(t,e)=>{t.refs={},t.K=e,t.yt={[l]:new Set},t.dt=[new Set,new Set],t.bt=[],t.vt=[],t.ht=new Set,t.ut=new Set,t.gt||(t.gt={}),t.fn||(t.fn=t.parent?Object.create(t.parent.fn):{}),(t=>{t.Ct={St:[],xt:[],wt:[],kt:[]};const{St:e,xt:n,wt:o,kt:s}=t.Ct;t.events={onMount:t=>e.push(t),onDestroy:t=>n.push(t),beforeUpdate:t=>o.push(t),afterUpdate:t=>s.push(t),onMutate:(n,o)=>{e.push((()=>{const e=o.map((t=>t.split(".")));return it(t,e,n,0)}))}}})(t)},lt=t=>{t.At&&(t.Pt=t.At.map((t=>t())),t.Ut=!0)},ft=t=>{t.Pt&&(t.Pt.forEach((t=>t())),t.Ut=!1)},ut=(t,e)=>{t.At||(t.At=[]),t.At.push(e)},dt=(t,e,n,o)=>{o.ft=e;ut(e,(()=>(o(),it(t,n,o,$))))},pt=(t,e,n)=>{const o=e.rt,{M:s,D:r}=e.q;if(dt(n,t,r,(()=>{t[o]=s(n)})),e.O===P.I){const e="number"===t.type||"range"===t.type,s=()=>{let s=t[o];s=e?Number(s):s,((t,e,n)=>{const[o,s]=R(t,e);Reflect.set(o,s,n)})(n.$,r[0],s)};t.addEventListener("input",s)}},{A:mt,U:yt,k:bt,V:vt,j:ht,P:gt,R:Ct,N:St,I:xt}=P,wt={[mt]:(t,e,n)=>{const o=e.q,s=e.rt,r=n.fn[o],c=t=>r(t,n.$);ut(t,(()=>(t.addEventListener(s,c),()=>t.removeEventListener(s,c))))},[yt]:pt,[xt]:pt,[bt]:(t,e,n)=>{const o=e.q;dt(n,t,o.D,(()=>d(t,e.rt,o.M(n))))},[vt]:(t,e,n)=>{const o=e.q,s=e.rt;dt(n,t,o.D,(()=>o.M(n)?d(n,s,""):u(t,s)))},[ht]:(t,e,n)=>{t.fn||(t.fn=Object.create(t.parent.fn)),t.fn[e.rt]=n.fn[e.q]},[gt]:(t,e,n)=>{const{q:o,rt:s}=e,{M:r,D:c}=o,_=()=>{t.$[s]=r(n)};t===n?_():(t.gt||(t.gt={}),t.gt[s]=r(n)),it(n,c,_,V)},[Ct]:(t,e)=>{t.gt[e.rt]=e.q},[St]:(t,e,n)=>{const o=e.q;n.refs[o]=t}},kt=(t,e,n)=>{e.forEach((e=>{const o=e.O,s=wt[o];s&&s(t,e,n)}))},At=(t,e)=>{t.H&&(e.H=t.H),t.hasChildNodes()&&t.childNodes.forEach(((t,n)=>{At(t,e.childNodes[n])}))},Pt=t=>{const e=t.cloneNode(!0);return At(t,e),e},Ut=(t,e,n=!1,o)=>{t.style.animation=e,n&&It(t,(()=>{t.style.animation="",o&&o()}))},It=(t,e)=>{t.addEventListener("animationend",e,{once:!0})},Vt=(t,e)=>{const n=t.H,o=[t];n.et&&n.et.forEach((t=>{o.push(Pt(t))})),t.It=!0;const{nt:s}=n,r=t.previousSibling;let c,_;const i=()=>{let t=!1;o.forEach((n=>{const{It:o,isConnected:s}=n,{tt:i,Y:a}=n.H,{g:l,C:f}=a,u=!i||i.M(e);if(!t&&u){if(t=!0,!s){o||(Mt(n,e),n.It=!0);const t=()=>{r.after(n),l&&_&&Ut(n,l,!0)};c&&c.H.Y.C&&n!==c?It(c,t):t(),c=n}}else s&&(f?(p=f,(d=n).disconnectedCallback(),d.Vt=!0,Ut(d,p,!0,(()=>d.remove()))):n.remove());var d,p}))};it(e,s,i,V),e.vt.push((()=>{t.remove(),i(),_=!0}))},$t=t=>({$t:t.offsetLeft,Rt:t.offsetTop}),Rt=(t,e)=>{const[n,o]=t,{jt:s,Nt:r,Ot:c,Dt:_}=e,i=((t,e,n)=>{const{Mt:o,Tt:s,Gt:r}=t,c=Pt(o);return c.Et=!0,c.parent=s,c.gt=r(e,n),c})(e,o,n);0===n?r.after(i):s[n-1].after(i),s.splice(n,0,i),c.g&&_&&Ut(i,c.g,!0)},jt=(t,n)=>{const[o,s]=t;((t,n)=>{t.Ht=!0,n.Ht=!0;const o=t.parentNode,s=n.parentNode,r=e("div"),c=e("div");o.replaceChild(r,t),s.replaceChild(c,n),o.replaceChild(n,r),s.replaceChild(t,c),t.Ht=!1,n.Ht=!1})(n[o],n[s]),C(n,o,s)},Nt=(t,e,n)=>{const o=$t(t),s=e.$t-o.$t,r=e.Rt-o.Rt;requestAnimationFrame((()=>{t.style.transform=`translate(${s}px, ${r}px)`,t.style.transition="",requestAnimationFrame((()=>{t.style.transform="",t.style.transition=`transform ${n}`}))}))},Ot=(t,e,n,o)=>{const{jt:s,Dt:r,Ot:c,B:_}=t,{S:i,C:a}=c,{W:l,X:f}=_,u=Object.keys(n),d=()=>{u.length&&u.forEach((t=>{const e=Number(t),o=s[e];o&&n[e].forEach((t=>{const[e,n]=R(o.$[l],t.qt);e[n]=t.Ft}))}))};e.length?(()=>{const n=(t=>{const{Tt:e,Kt:n,Lt:o}=t,s=o();return{zt:s,Bt:n(),Jt:x(s)}})(t),c=((t,e,n)=>{const o={Qt:[],Wt:[],Xt:[]};for(const s of n)for(;;){const n=t.zt[s];if(!w(n))break;if(n in e.Jt)break;o.Qt.push(s),t.zt.splice(s,1),t.Bt.splice(s,1)}for(const s of n){const n=e.zt[s];w(n)&&(n in t.Jt||(o.Wt.push([s,e.Bt[s]]),S(t.zt,s,n),S(t.Bt,s,e.Bt[s])))}for(const s of n){const n=t.zt[s];if(n!==e.zt[s]){const r=e.Jt[n];o.Xt.push([s,r]),C(t.zt,s,r),C(t.Bt,s,r)}}return t.Jt=x(t.zt),o})(o,n,e);i&&r&&((t,e)=>{for(const n of t){const t=e[n];t.Yt=$t(t)}})(e,s);const _=()=>{((t,e)=>{const{Qt:n,Wt:o,Xt:s}=t,{jt:r}=e;n.forEach((t=>{return(n=r)[e=t].remove(),void n.splice(e,1);var e,n})),o.forEach((t=>Rt(t,e))),s.forEach((t=>jt(t,r)))})(c,t),r&&(f&&e.forEach((t=>{s[t]&&(s[t].$[f]=t)})),d()),i&&((t,e)=>{const n=t.Ot.S,o=t.jt;for(const t of e){const e=o[t];Nt(e,e.Yt,n)}})(t,e)};if(a&&c.Qt.length){((t,e,n)=>{const o=t.length-1;t.forEach(((t,s)=>{Ut(t,e,!0,(()=>{s===o&&n()}))}))})(c.Qt.map(((t,e)=>s[t+e])),a,_)}else _();o.Bt=[...n.Bt],o.zt=n.zt,o.Jt=n.Jt})():d()},Dt=(t,e)=>{const o=t.H,s=o.B,{J:r,X:c,W:_,h:i}=s,a=r.D[0],l=a.join("."),f=n("loop/"),u={Bt:[],zt:[],Jt:{}},d=(t,e)=>{const n={[_]:t};return c&&(n[c]=e),n},p=()=>r.M(e),m=(e,n)=>{const o={$:d(e,n),K:t.K};return i.M(o)},y={jt:[],Nt:f,Mt:t,Kt:p,Gt:d,Lt:()=>p().map(m),Tt:e,Dt:!1,B:s,Ot:o.Y},b=()=>{const t=p().length;Ot(y,(t=>{const e=[];for(let n=0;n<t;n++)e.push(n);return e})(t),{},u)};e.vt.push((()=>{t.before(f),t.before(n("/loop")),t.remove(),b(),y.Dt=!0}));_t(e,a,(t=>{if(t.some((t=>{return e=t.path,n=a,e.length===n.length&&e.every(((t,e)=>t===n[e]));var e,n})))b();else{const[e,n]=((t,e,n)=>{const o=new Set,s={},r=n.length;return t.forEach((t=>{const{newValue:n,oldValue:c,livePath:_}=t,i=_();if(i.join(".").startsWith(e)){const t=i[r];if(i.length===r+1)if("length"===t)for(let t=n;t<c;t++)o.add(t);else o.add(Number(t));else{const e={qt:i.slice(r+1),Ft:n};t in s?s[t].push(e):s[t]=[e]}}})),[[...o].sort(((t,e)=>t-e)),s]})(t,l,a);Ot(y,e,n,u)}}),$)},Mt=(t,e)=>{const{H:n,nodeType:s}=t;if(n){if(e.ht.add(t),n.F){if(t.parent=e,t.gt={},n.B)return Dt(t,e);n.Z===o.u&&Vt(t,e)}else if(s===t.TEXT_NODE)return((t,e)=>{const n=t.H,{M:o,D:s}=n.q;dt(e,t,s,(()=>{t.textContent=o(e)}))})(t,e);n.L&&kt(t,n.L,e)}(t=>t.H&&t.H.F)(t)||t.hasChildNodes()&&t.childNodes.forEach((t=>Mt(t,e)))},Tt=t=>{t[l].forEach((t=>t()));for(const e in t)Tt(t[e])},Gt=(t,e)=>{((t,e)=>{let n=t;const o=e.length-1;e.forEach(((t,e)=>{n[l].forEach((t=>t())),n=n[t],n&&e===o&&Tt(n)}))})(t.yt,e),t.Zt||(t=>{t.Zt=!0,setTimeout((()=>{const e=[...t.bt];((t,e)=>{const{wt:n,kt:o}=t.Ct;n.forEach((t=>t(e))),t.dt.forEach((t=>((t,e)=>{t.forEach((t=>{const{ft:n}=t;(n&&n.Ut||!n)&&t(e)})),t.clear()})(t,e))),o.forEach((t=>t(e)))})(t,e),t.bt.length=0,t.Zt=!1}),0)})(t)},Et={te:[]},Ht=(t,e,n)=>{const[o,s]=(t=>{ct._t=!0;const e=t();ct._t=!1;const n=[...Et.te];return Et.te=[],[e,n]})(e),r=s.map((t=>1===t.length?t:t.slice(0,-1)));return it(t,r,(()=>{const o=e();t.$[n]=o}),V),o},qt=(t,e,n=[])=>{const o=t.parent&&t.parent.$;let s=n;if(!A(e))return e;const r=Array.isArray(e)?[]:{};Object.keys(e).forEach((n=>{r[n]=qt(t,e[n],[...s,n])}));return new Proxy(r,{has:(t,e)=>e in t||!!o&&e in o,set(e,n,r){if(e[n]===r)return!0;if(n===i)return s=[...s.slice(0,-1),r],!0;const c=n in e;let _=r;if(ct.at){if(c)return!0;"function"==typeof _&&(_=Ht(t,_,n))}else if(!c&&o&&n in o)return Reflect.set(o,n,r);A(_)&&(_[a]?Array.isArray(e)&&(_[i]=n):_=qt(t,_,[...s,n]));const l=()=>Reflect.set(e,n,_);if(ct.it){const o=e[n],r=_,c=l();if(o!==r){const e=()=>[...s,n],c=e();t.bt.push({oldValue:o,newValue:r,path:c,livePath:e}),Gt(t,c)}return c}return l()},deleteProperty:(e,n)=>(ct.it&&Gt(t,[...s,n]),Reflect.deleteProperty(e,n)),get(e,n){if(n===a)return!0;if(n===_)return e;if(ct._t){const t=[...s,n];0!==s.length?Et.te[Et.te.length-1]=t:Et.te.push(t)}return n in e?ct.lt?t:Reflect.get(e,n):o?Reflect.get(o,n):void 0}})};function Ft(t,e){t.$=qt(t,t.gt||{},[]),e.js&&((t,e)=>{ct.it=!1,ct.at=!0,t(e),ct.it=!0,ct.at=!1})(e.js,t),t.Et&&kt(t,t.H.L,t),t.childNodes.forEach((e=>Mt(e,t))),((t,e)=>{const n=Pt(e.content);Mt(n,t),k(t.vt),t.attachShadow({mode:"open"}).append(n)})(t,e.ct),lt(t)}const Kt=n=>{const{o:o}=t,s=n.name;if(s in o)return;o[s]=n;const r=(t=>{const n=new t,o=t.name;return n.ee=t,n.K=o,n.ne=g(o),n.ct=e("template"),n.st=n.components?n.components.reduce(((t,e)=>{const{name:n}=e;var o;return t[(o=n,(t=>t.toUpperCase())(o)+"-")]=n,t}),{}):{},n})(n);st(r);class c extends HTMLElement{constructor(){super(),at(this,s)}connectedCallback(){((t,e)=>{if(t.Ht)return;t.Vt=!1;const{ht:n,ut:o,Ct:s,shadowRoot:r}=t;r?o.forEach(lt):(Ft(t,e),n.forEach(lt)),s.St.forEach((t=>t()))})(this,r)}disconnectedCallback(){(t=>{const{Ct:e,ut:n,Vt:o,Ht:s}=t;o||s||(n.forEach(ft),e.xt.forEach((t=>t())))})(this)}}const{ne:_,components:i}=r;customElements.define(_,c),i&&i.forEach(Kt)};exports.render=(n,o)=>{o&&(t.i={...t.i,...o}),Kt(n);const s=n.name,r=document.querySelector(s),c=e(g(s));return r.replaceWith(c),c};
